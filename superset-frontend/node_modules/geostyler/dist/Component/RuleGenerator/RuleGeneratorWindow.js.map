{"version":3,"file":"RuleGeneratorWindow.js","sourceRoot":"","sources":["../../../src/Component/RuleGenerator/RuleGeneratorWindow.tsx"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;GA0BG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,2CAA+B;AAC/B,kDAAsC;AACtC,uCAAsD;AAEtD,uCAAgC;AAQhC,sCAAoC;AACpC,6BAA8B;AAE9B,2CAAkD;AAElD,gEAA0D;AAC1D,kEAA4C;AAG5C,6DAAwC;AAExC,6DAAuC;AAqBvC,IAAM,aAAa,GAAG,qBAAqB,CAAC;AAE5C;;GAEG;AACI,IAAM,mBAAmB,GAAuC,UAAC,EAUvE;QATC,cAAkC,EAAlC,MAAM,mBAAG,eAAK,CAAC,mBAAmB,KAAA,EAClC,eAAe,qBAAA,EACf,CAAC,OAAA,EACD,CAAC,OAAA,EACD,OAAO,aAAA,EACP,aAAa,mBAAA,EACb,UAAU,gBAAA,EACV,mBAAmB,yBAAA,EACnB,WAAW,iBAAA;IAGX,IAAI,KAAK,GAAG,UAAU,CAAC;IACvB,IAAI,UAAU,IAAI,mBAAmB,EAAE;QACrC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,kBAAM,CAAC,CAAC;KAC3C;IAED,OAAO,CACL,QAAQ,CAAC,YAAY,CACnB,oBAAC,eAAG,IACF,SAAS,EAAC,uBAAuB,EACjC,OAAO,EAAE;YACP,CAAC,EAAE,IAAA,kBAAS,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,GAAG,CAAC;YAC3C,CAAC,EAAE,IAAA,kBAAS,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC;YAC5C,KAAK,EAAE,SAAS;YAChB,MAAM,EAAE,SAAS;SAClB,EACD,cAAc,EAAE;YACd,MAAM,EAAE,KAAK;YACb,UAAU,EAAE,KAAK;YACjB,WAAW,EAAE,KAAK;YAClB,IAAI,EAAE,KAAK;YACX,KAAK,EAAE,KAAK;YACZ,GAAG,EAAE,KAAK;YACV,OAAO,EAAE,KAAK;YACd,QAAQ,EAAE,KAAK;SAChB,EACD,MAAM,EAAC,QAAQ,EACf,mBAAmB,EAAC,OAAO;QAE3B,6BAAK,SAAS,EAAC,qCAAqC;YAClD,8BAAM,SAAS,EAAC,OAAO,IACpB,MAAM,CAAC,aAAa,CAChB;YACP,oBAAC,aAAM,IACL,IAAI,EAAE,oBAAC,qBAAa,OAAG,EACvB,IAAI,EAAC,OAAO,EACZ,OAAO,EAAE,OAAO,GAChB,CACE;QACN,oBAAC,uBAAa,IACZ,eAAe,EAAE,eAAe,EAChC,aAAa,EAAE,aAAa,EAC5B,UAAU,EAAE,KAAK,EACjB,WAAW,EAAE,WAAW,GACxB,CACE,EACN,QAAQ,CAAC,IAAI,CACd,CACF,CAAC;AACJ,CAAC,CAAC;AA5DW,QAAA,mBAAmB,uBA4D9B;AAEF,kBAAe,IAAA,wBAAQ,EAAC,2BAAmB,EAAE,aAAa,CAAC,CAAC","sourcesContent":["/* Released under the BSD 2-Clause License\n *\n * Copyright Â© 2018-present, terrestris GmbH & Co. KG and GeoStyler contributors\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * * Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * * Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { brewer, InterpolationMode } from 'chroma-js';\n\nimport { Rnd } from 'react-rnd';\n\nimport {\n  Rule\n} from 'geostyler-style';\n\nimport { VectorData } from 'geostyler-data';\n\nimport './RuleGeneratorWindow.less';\nimport { Button } from 'antd';\n\nimport { CloseOutlined } from '@ant-design/icons';\n\nimport { localize } from '../LocaleWrapper/LocaleWrapper';\nimport RuleGenerator from './RuleGenerator';\n\nimport _isEqual from 'lodash/isEqual';\nimport _isFinite from 'lodash/isFinite';\nimport { GeoStylerLocale } from '../../locale/locale';\nimport en_US from '../../locale/en_US';\n\n// default props\nexport interface RuleGeneratorWindowDefaultProps {\n  locale: GeoStylerLocale['RuleGeneratorWindow'];\n}\n\n// non default props\nexport interface RuleGeneratorWindowProps extends Partial<RuleGeneratorWindowDefaultProps> {\n  internalDataDef: VectorData;\n  x?: number;\n  y?: number;\n  onClose?: () => void;\n  onRulesChange?: (rules: Rule[]) => void;\n  colorRamps?: {\n    [name: string]: string[];\n  };\n  useBrewerColorRamps?: boolean;\n  colorSpaces?: (InterpolationMode)[];\n}\n\nconst COMPONENTNAME = 'RuleGeneratorWindow';\n\n/**\n * Symbolizer editorwindow UI.\n */\nexport const RuleGeneratorWindow: React.FC<RuleGeneratorWindowProps> = ({\n  locale = en_US.RuleGeneratorWindow,\n  internalDataDef,\n  x,\n  y,\n  onClose,\n  onRulesChange,\n  colorRamps,\n  useBrewerColorRamps,\n  colorSpaces\n}) => {\n\n  let ramps = colorRamps;\n  if (colorRamps && useBrewerColorRamps) {\n    ramps = Object.assign(colorRamps, brewer);\n  }\n\n  return (\n    ReactDOM.createPortal(\n      <Rnd\n        className=\"rule-generator-window\"\n        default={{\n          x: _isFinite(x) ? x : window.innerWidth / 2,\n          y: _isFinite(y) ? y : window.innerHeight / 2,\n          width: undefined,\n          height: undefined\n        }}\n        enableResizing={{\n          bottom: false,\n          bottomLeft: false,\n          bottomRight: false,\n          left: false,\n          right: false,\n          top: false,\n          topLeft: false,\n          topRight: false\n        }}\n        bounds=\"window\"\n        dragHandleClassName=\"title\"\n      >\n        <div className=\"header rule-generator-window-header\">\n          <span className=\"title\">\n            {locale.ruleGenerator}\n          </span>\n          <Button\n            icon={<CloseOutlined />}\n            size=\"small\"\n            onClick={onClose}\n          />\n        </div>\n        <RuleGenerator\n          internalDataDef={internalDataDef}\n          onRulesChange={onRulesChange}\n          colorRamps={ramps}\n          colorSpaces={colorSpaces}\n        />\n      </Rnd>,\n      document.body\n    )\n  );\n};\n\nexport default localize(RuleGeneratorWindow, COMPONENTNAME);\n"]}