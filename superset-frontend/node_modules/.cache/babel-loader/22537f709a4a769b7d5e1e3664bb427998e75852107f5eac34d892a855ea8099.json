{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _isEmpty from \"lodash/isEmpty\";import _get from \"lodash/get\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// TODO: Remove fa-icon\n/* eslint-disable icons/no-fa-icons-usage */\nimport { Fragment, useState, useEffect, PureComponent } from 'react';\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\n\nimport { t, styled, css, SupersetClient, getExtensionsRegistry, useTheme } from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport UploadDataModal from 'src/features/databases/UploadDataModel';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport TelemetryPixel from 'src/components/TelemetryPixel';\nimport LanguagePicker from './LanguagePicker';\nimport { GlobalMenuDataOptions } from './types';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst versionInfoStyles = (theme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\nconst styledDisabled = (theme) => css`\n  color: ${theme.colors.grayscale.light1};\n`;\nconst StyledDiv = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n  justify-content: ${({ align }) => align};\n  align-items: center;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst StyledAnchor = styled.a`\n  padding-right: ${({ theme }) => theme.gridUnit}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\nconst tagStyles = (theme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\nconst styledChildMenu = (theme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\nconst { SubMenu } = Menu;\nconst StyledSubMenu = styled(SubMenu)`\n  ${({ theme }) => css`\n    [data-icon='caret-down'] {\n      color: ${theme.colors.grayscale.base};\n      font-size: ${theme.typography.sizes.xxs}px;\n      margin-left: ${theme.gridUnit}px;\n    }\n    &.antd5-menu-submenu-active {\n      .antd5-menu-title-content {\n        color: ${theme.colors.primary.base};\n      }\n    }\n  `}\n`;\nconst RightMenu = ({ align, settings, navbarRight, isFrontendRoute, environmentTag, setQuery }) => {\n  const user = useSelector((state) => state.user);\n  const dashboardId = useSelector((state) => {var _state$dashboardInfo;return (_state$dashboardInfo = state.dashboardInfo) == null ? void 0 : _state$dashboardInfo.id;});\n  const userValues = user || {};\n  const { roles } = userValues;\n  const { CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS, HAS_GSHEETS_INSTALLED } = useSelector((state) => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState(false);\n  const [showCSVUploadModal, setShowCSVUploadModal] = useState(false);\n  const [showExcelUploadModal, setShowExcelUploadModal] = useState(false);\n  const [showColumnarUploadModal, setShowColumnarUploadModal] = useState(false);\n  const [engine, setEngine] = useState('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } = uploadUserPerms(roles, CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS);\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] = useState(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems = [\n  {\n    label: t('Data'),\n    icon: 'fa-database',\n    childs: [\n    {\n      label: t('Connect database'),\n      name: GlobalMenuDataOptions.DbConnection,\n      perm: canDatabase && !nonExamplesDBConnected\n    },\n    {\n      label: t('Create dataset'),\n      name: GlobalMenuDataOptions.DatasetCreation,\n      url: '/dataset/add/',\n      perm: canDataset && nonExamplesDBConnected\n    },\n    {\n      label: t('Connect Google Sheet'),\n      name: GlobalMenuDataOptions.GoogleSheets,\n      perm: canDatabase && HAS_GSHEETS_INSTALLED\n    },\n    {\n      label: t('Upload CSV to database'),\n      name: GlobalMenuDataOptions.CSVUpload,\n      perm: canUploadCSV && showUploads,\n      disable: isAdmin && !allowUploads\n    },\n    {\n      label: t('Upload Excel to database'),\n      name: GlobalMenuDataOptions.ExcelUpload,\n      perm: canUploadExcel && showUploads,\n      disable: isAdmin && !allowUploads\n    },\n    {\n      label: t('Upload Columnar file to database'),\n      name: GlobalMenuDataOptions.ColumnarUpload,\n      perm: canUploadColumnar && showUploads,\n      disable: isAdmin && !allowUploads\n    }]\n\n  },\n  {\n    label: t('SQL query'),\n    url: '/sqllab?new=true',\n    icon: 'fa-fw fa-search',\n    perm: 'can_sqllab',\n    view: 'Superset'\n  },\n  {\n    label: t('Chart'),\n    url: Number.isInteger(dashboardId) ?\n    `/chart/add?dashboard_id=${dashboardId}` :\n    '/chart/add',\n    icon: 'fa-fw fa-bar-chart',\n    perm: 'can_write',\n    view: 'Chart'\n  },\n  {\n    label: t('Dashboard'),\n    url: '/dashboard/new',\n    icon: 'fa-fw fa-dashboard',\n    perm: 'can_write',\n    view: 'Dashboard'\n  }];\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n      { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true }]\n\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`\n    }).then(({ json }) => {var _json$result;\n      // There might be some existing Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload = (json == null ? void 0 : (_json$result = json.result) == null ? void 0 : _json$result.filter((database) => {var _database$engine_info;return database == null ? void 0 : (_database$engine_info = database.engine_information) == null ? void 0 : _database$engine_info.supports_file_upload;})) || [];\n      setAllowUploads((allowedDatabasesWithFileUpload == null ? void 0 : allowedDatabasesWithFileUpload.length) >= 1);\n    });\n  };\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }]\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`\n    }).then(({ json }) => {\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n  const menuIcon = (menu) => _jsx(\"i\", { className: `fa ${menu.icon}` });\n  const handleMenuSelection = (itemChose) => {\n    if (itemChose.key === GlobalMenuDataOptions.DbConnection) {\n      setShowDatabaseModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.GoogleSheets) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.CSVUpload) {\n      setShowCSVUploadModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.ExcelUpload) {\n      setShowExcelUploadModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.ColumnarUpload) {\n      setShowColumnarUploadModal(true);\n    }\n  };\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n  const tooltipText = t(\"Enable 'Allow file uploads to database' in any database's settings\");\n  const buildMenuItem = (item) => item.disable ? _jsx(Menu.Item, { css: styledDisabled, disabled: true, children:\n    _jsx(Tooltip, { placement: \"top\", title: tooltipText, children:\n      item.label }\n    ) }, item.name\n  ) : _jsx(Menu.Item, { css: styledChildMenu, children:\n    item.url ? _jsxs(\"a\", { href: item.url, children: [\" \", item.label, \" \"] }) : item.label }, item.name\n  );\n  const onMenuOpen = (openKeys) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (openKeys.length > 1 &&\n    !_isEmpty(openKeys == null ? void 0 : openKeys.filter((key) => {var _dropdownItems$;return key.includes(`sub2_${dropdownItems == null ? void 0 : (_dropdownItems$ = dropdownItems[0]) == null ? void 0 : _dropdownItems$.label}`);}))) {\n      if (canUploadData)\n      checkAllowUploads();\n      if (canDatabase || canDataset)\n      existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get('navbar.right-menu.item.icon');\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n  const handleLogout = () => {\n    localStorage.removeItem('redux');\n  };\n  const theme = useTheme();\n  return _jsxs(StyledDiv, { align: align, children: [\n    canDatabase && _jsx(DatabaseModal, { onHide: handleOnHideModal, show: showDatabaseModal, dbEngine: engine, onDatabaseAdd: handleDatabaseAdd }),\n    canUploadCSV && _jsx(UploadDataModal, { onHide: () => setShowCSVUploadModal(false), show: showCSVUploadModal, allowedExtensions: CSV_EXTENSIONS, type: \"csv\" }),\n    canUploadExcel && _jsx(UploadDataModal, { onHide: () => setShowExcelUploadModal(false), show: showExcelUploadModal, allowedExtensions: EXCEL_EXTENSIONS, type: \"excel\" }),\n    canUploadColumnar && _jsx(UploadDataModal, { onHide: () => setShowColumnarUploadModal(false), show: showColumnarUploadModal, allowedExtensions: COLUMNAR_EXTENSIONS, type: \"columnar\" }),\n    (environmentTag == null ? void 0 : environmentTag.text) && _jsx(Label, { css: /*#__PURE__*/_css({ borderRadius: `${theme.gridUnit * 125}px` }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:RightMenu;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FkZWwvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2ZlYXR1cmVzL2hvbWUvUmlnaHRNZW51LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4UXVDIiwiZmlsZSI6Ii9ob21lL2FkZWwvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2ZlYXR1cmVzL2hvbWUvUmlnaHRNZW51LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE86IFJlbW92ZSBmYS1pY29uXG4vKiBlc2xpbnQtZGlzYWJsZSBpY29ucy9uby1mYS1pY29ucy11c2FnZSAqL1xuaW1wb3J0IHsgRnJhZ21lbnQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyB1c2VRdWVyeVBhcmFtcywgQm9vbGVhblBhcmFtIH0gZnJvbSAndXNlLXF1ZXJ5LXBhcmFtcyc7XG5pbXBvcnQgeyBnZXQsIGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgdCwgc3R5bGVkLCBjc3MsIFN1cGVyc2V0Q2xpZW50LCBnZXRFeHRlbnNpb25zUmVnaXN0cnksIHVzZVRoZW1lLCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IE1lbnUgfSBmcm9tICdzcmMvY29tcG9uZW50cy9NZW51JztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Ub29sdGlwJztcbmltcG9ydCBJY29ucyBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IHsgZmluZFBlcm1pc3Npb24gfSBmcm9tICdzcmMvdXRpbHMvZmluZFBlcm1pc3Npb24nO1xuaW1wb3J0IHsgaXNVc2VyQWRtaW4gfSBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvcGVybWlzc2lvblV0aWxzJztcbmltcG9ydCBEYXRhYmFzZU1vZGFsIGZyb20gJ3NyYy9mZWF0dXJlcy9kYXRhYmFzZXMvRGF0YWJhc2VNb2RhbCc7XG5pbXBvcnQgVXBsb2FkRGF0YU1vZGFsIGZyb20gJ3NyYy9mZWF0dXJlcy9kYXRhYmFzZXMvVXBsb2FkRGF0YU1vZGVsJztcbmltcG9ydCB7IHVwbG9hZFVzZXJQZXJtcyB9IGZyb20gJ3NyYy92aWV3cy9DUlVEL3V0aWxzJztcbmltcG9ydCBUZWxlbWV0cnlQaXhlbCBmcm9tICdzcmMvY29tcG9uZW50cy9UZWxlbWV0cnlQaXhlbCc7XG5pbXBvcnQgTGFuZ3VhZ2VQaWNrZXIgZnJvbSAnLi9MYW5ndWFnZVBpY2tlcic7XG5pbXBvcnQgeyBHbG9iYWxNZW51RGF0YU9wdGlvbnMsIH0gZnJvbSAnLi90eXBlcyc7XG5jb25zdCBleHRlbnNpb25zUmVnaXN0cnkgPSBnZXRFeHRlbnNpb25zUmVnaXN0cnkoKTtcbmNvbnN0IHZlcnNpb25JbmZvU3R5bGVzID0gKHRoZW1lKSA9PiBjc3MgYFxuICBwYWRkaW5nOiAke3RoZW1lLmdyaWRVbml0ICogMS41fXB4ICR7dGhlbWUuZ3JpZFVuaXQgKiA0fXB4XG4gICAgJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHggJHt0aGVtZS5ncmlkVW5pdCAqIDd9cHg7XG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX07XG4gIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnhzfXB4O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuYDtcbmNvbnN0IHN0eWxlZERpc2FibGVkID0gKHRoZW1lKSA9PiBjc3MgYFxuICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0MX07XG5gO1xuY29uc3QgU3R5bGVkRGl2ID0gc3R5bGVkLmRpdiBgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGhlaWdodDogMTAwJTtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiAkeyh7IGFsaWduIH0pID0+IGFsaWdufTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuYDtcbmNvbnN0IFN0eWxlZE1lbnVJdGVtV2l0aEljb24gPSBzdHlsZWQuZGl2IGBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuYDtcbmNvbnN0IFN0eWxlZEFuY2hvciA9IHN0eWxlZC5hIGBcbiAgcGFkZGluZy1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgcGFkZGluZy1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuYDtcbmNvbnN0IHRhZ1N0eWxlcyA9ICh0aGVtZSkgPT4gY3NzIGBcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9O1xuYDtcbmNvbnN0IHN0eWxlZENoaWxkTWVudSA9ICh0aGVtZSkgPT4gY3NzIGBcbiAgJjpob3ZlciB7XG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuYmFzZX0gIWltcG9ydGFudDtcbiAgICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbiAgfVxuYDtcbmNvbnN0IHsgU3ViTWVudSB9ID0gTWVudTtcbmNvbnN0IFN0eWxlZFN1Yk1lbnUgPSBzdHlsZWQoU3ViTWVudSkgYFxuICAkeyh7IHRoZW1lIH0pID0+IGNzcyBgXG4gICAgW2RhdGEtaWNvbj0nY2FyZXQtZG93biddIHtcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX07XG4gICAgICBmb250LXNpemU6ICR7dGhlbWUudHlwb2dyYXBoeS5zaXplcy54eHN9cHg7XG4gICAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5ncmlkVW5pdH1weDtcbiAgICB9XG4gICAgJi5hbnRkNS1tZW51LXN1Ym1lbnUtYWN0aXZlIHtcbiAgICAgIC5hbnRkNS1tZW51LXRpdGxlLWNvbnRlbnQge1xuICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfTtcbiAgICAgIH1cbiAgICB9XG4gIGB9XG5gO1xuY29uc3QgUmlnaHRNZW51ID0gKHsgYWxpZ24sIHNldHRpbmdzLCBuYXZiYXJSaWdodCwgaXNGcm9udGVuZFJvdXRlLCBlbnZpcm9ubWVudFRhZywgc2V0UXVlcnksIH0pID0+IHtcbiAgICBjb25zdCB1c2VyID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUudXNlcik7XG4gICAgY29uc3QgZGFzaGJvYXJkSWQgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS5kYXNoYm9hcmRJbmZvPy5pZCk7XG4gICAgY29uc3QgdXNlclZhbHVlcyA9IHVzZXIgfHwge307XG4gICAgY29uc3QgeyByb2xlcyB9ID0gdXNlclZhbHVlcztcbiAgICBjb25zdCB7IENTVl9FWFRFTlNJT05TLCBDT0xVTU5BUl9FWFRFTlNJT05TLCBFWENFTF9FWFRFTlNJT05TLCBBTExPV0VEX0VYVEVOU0lPTlMsIEhBU19HU0hFRVRTX0lOU1RBTExFRCwgfSA9IHVzZVNlbGVjdG9yKHN0YXRlID0+IHN0YXRlLmNvbW1vbi5jb25mKTtcbiAgICBjb25zdCBbc2hvd0RhdGFiYXNlTW9kYWwsIHNldFNob3dEYXRhYmFzZU1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2hvd0NTVlVwbG9hZE1vZGFsLCBzZXRTaG93Q1NWVXBsb2FkTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtzaG93RXhjZWxVcGxvYWRNb2RhbCwgc2V0U2hvd0V4Y2VsVXBsb2FkTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtzaG93Q29sdW1uYXJVcGxvYWRNb2RhbCwgc2V0U2hvd0NvbHVtbmFyVXBsb2FkTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtlbmdpbmUsIHNldEVuZ2luZV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgY2FuU3FsID0gZmluZFBlcm1pc3Npb24oJ2Nhbl9zcWxsYWInLCAnU3VwZXJzZXQnLCByb2xlcyk7XG4gICAgY29uc3QgY2FuRGFzaGJvYXJkID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXNoYm9hcmQnLCByb2xlcyk7XG4gICAgY29uc3QgY2FuQ2hhcnQgPSBmaW5kUGVybWlzc2lvbignY2FuX3dyaXRlJywgJ0NoYXJ0Jywgcm9sZXMpO1xuICAgIGNvbnN0IGNhbkRhdGFiYXNlID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXRhYmFzZScsIHJvbGVzKTtcbiAgICBjb25zdCBjYW5EYXRhc2V0ID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXRhc2V0Jywgcm9sZXMpO1xuICAgIGNvbnN0IHsgY2FuVXBsb2FkRGF0YSwgY2FuVXBsb2FkQ1NWLCBjYW5VcGxvYWRDb2x1bW5hciwgY2FuVXBsb2FkRXhjZWwgfSA9IHVwbG9hZFVzZXJQZXJtcyhyb2xlcywgQ1NWX0VYVEVOU0lPTlMsIENPTFVNTkFSX0VYVEVOU0lPTlMsIEVYQ0VMX0VYVEVOU0lPTlMsIEFMTE9XRURfRVhURU5TSU9OUyk7XG4gICAgY29uc3Qgc2hvd0FjdGlvbkRyb3Bkb3duID0gY2FuU3FsIHx8IGNhbkNoYXJ0IHx8IGNhbkRhc2hib2FyZDtcbiAgICBjb25zdCBbYWxsb3dVcGxvYWRzLCBzZXRBbGxvd1VwbG9hZHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtub25FeGFtcGxlc0RCQ29ubmVjdGVkLCBzZXROb25FeGFtcGxlc0RCQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBpc0FkbWluID0gaXNVc2VyQWRtaW4odXNlcik7XG4gICAgY29uc3Qgc2hvd1VwbG9hZHMgPSBhbGxvd1VwbG9hZHMgfHwgaXNBZG1pbjtcbiAgICBjb25zdCBkcm9wZG93bkl0ZW1zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnRGF0YScpLFxuICAgICAgICAgICAgaWNvbjogJ2ZhLWRhdGFiYXNlJyxcbiAgICAgICAgICAgIGNoaWxkczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ0Nvbm5lY3QgZGF0YWJhc2UnKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogR2xvYmFsTWVudURhdGFPcHRpb25zLkRiQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuRGF0YWJhc2UgJiYgIW5vbkV4YW1wbGVzREJDb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdDcmVhdGUgZGF0YXNldCcpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuRGF0YXNldENyZWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZGF0YXNldC9hZGQvJyxcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuRGF0YXNldCAmJiBub25FeGFtcGxlc0RCQ29ubmVjdGVkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnQ29ubmVjdCBHb29nbGUgU2hlZXQnKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogR2xvYmFsTWVudURhdGFPcHRpb25zLkdvb2dsZVNoZWV0cyxcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuRGF0YWJhc2UgJiYgSEFTX0dTSEVFVFNfSU5TVEFMTEVELFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnVXBsb2FkIENTViB0byBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuQ1NWVXBsb2FkLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5VcGxvYWRDU1YgJiYgc2hvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IGlzQWRtaW4gJiYgIWFsbG93VXBsb2FkcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1VwbG9hZCBFeGNlbCB0byBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuRXhjZWxVcGxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhblVwbG9hZEV4Y2VsICYmIHNob3dVcGxvYWRzLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlOiBpc0FkbWluICYmICFhbGxvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdVcGxvYWQgQ29sdW1uYXIgZmlsZSB0byBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuQ29sdW1uYXJVcGxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhblVwbG9hZENvbHVtbmFyICYmIHNob3dVcGxvYWRzLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlOiBpc0FkbWluICYmICFhbGxvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiB0KCdTUUwgcXVlcnknKSxcbiAgICAgICAgICAgIHVybDogJy9zcWxsYWI/bmV3PXRydWUnLFxuICAgICAgICAgICAgaWNvbjogJ2ZhLWZ3IGZhLXNlYXJjaCcsXG4gICAgICAgICAgICBwZXJtOiAnY2FuX3NxbGxhYicsXG4gICAgICAgICAgICB2aWV3OiAnU3VwZXJzZXQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnQ2hhcnQnKSxcbiAgICAgICAgICAgIHVybDogTnVtYmVyLmlzSW50ZWdlcihkYXNoYm9hcmRJZClcbiAgICAgICAgICAgICAgICA/IGAvY2hhcnQvYWRkP2Rhc2hib2FyZF9pZD0ke2Rhc2hib2FyZElkfWBcbiAgICAgICAgICAgICAgICA6ICcvY2hhcnQvYWRkJyxcbiAgICAgICAgICAgIGljb246ICdmYS1mdyBmYS1iYXItY2hhcnQnLFxuICAgICAgICAgICAgcGVybTogJ2Nhbl93cml0ZScsXG4gICAgICAgICAgICB2aWV3OiAnQ2hhcnQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnRGFzaGJvYXJkJyksXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkL25ldycsXG4gICAgICAgICAgICBpY29uOiAnZmEtZncgZmEtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIHBlcm06ICdjYW5fd3JpdGUnLFxuICAgICAgICAgICAgdmlldzogJ0Rhc2hib2FyZCcsXG4gICAgICAgIH0sXG4gICAgXTtcbiAgICBjb25zdCBjaGVja0FsbG93VXBsb2FkcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGZpbHRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IGNvbDogJ2FsbG93X2ZpbGVfdXBsb2FkJywgb3ByOiAndXBsb2FkX2lzX2VuYWJsZWQnLCB2YWx1ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhYmFzZS8/cT0ke3Jpc29uLmVuY29kZShwYXlsb2FkKX1gLFxuICAgICAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlcmUgbWlnaHQgYmUgc29tZSBleGlzdGluZyBHc2hlZXRzIGFuZCBDbGlja2hvdXNlIERCc1xuICAgICAgICAgICAgLy8gd2l0aCBhbGxvd19maWxlX3VwbG9hZCBzZXQgYXMgVHJ1ZSB3aGljaCBpcyBub3QgcG9zc2libGUgZnJvbSBub3cgb25cbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWREYXRhYmFzZXNXaXRoRmlsZVVwbG9hZCA9IGpzb24/LnJlc3VsdD8uZmlsdGVyKChkYXRhYmFzZSkgPT4gZGF0YWJhc2U/LmVuZ2luZV9pbmZvcm1hdGlvbj8uc3VwcG9ydHNfZmlsZV91cGxvYWQpIHx8IFtdO1xuICAgICAgICAgICAgc2V0QWxsb3dVcGxvYWRzKGFsbG93ZWREYXRhYmFzZXNXaXRoRmlsZVVwbG9hZD8ubGVuZ3RoID49IDEpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGV4aXN0c05vbkV4YW1wbGVzRGF0YWJhc2VzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgZmlsdGVyczogW3sgY29sOiAnZGF0YWJhc2VfbmFtZScsIG9wcjogJ25lcScsIHZhbHVlOiAnZXhhbXBsZXMnIH1dLFxuICAgICAgICB9O1xuICAgICAgICBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFiYXNlLz9xPSR7cmlzb24uZW5jb2RlKHBheWxvYWQpfWAsXG4gICAgICAgIH0pLnRoZW4oKHsganNvbiB9KSA9PiB7XG4gICAgICAgICAgICBzZXROb25FeGFtcGxlc0RCQ29ubmVjdGVkKGpzb24uY291bnQgPj0gMSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGNhblVwbG9hZERhdGEpIHtcbiAgICAgICAgICAgIGNoZWNrQWxsb3dVcGxvYWRzKCk7XG4gICAgICAgIH1cbiAgICB9LCBbY2FuVXBsb2FkRGF0YV0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChjYW5EYXRhYmFzZSB8fCBjYW5EYXRhc2V0KSB7XG4gICAgICAgICAgICBleGlzdHNOb25FeGFtcGxlc0RhdGFiYXNlcygpO1xuICAgICAgICB9XG4gICAgfSwgW2NhbkRhdGFiYXNlLCBjYW5EYXRhc2V0XSk7XG4gICAgY29uc3QgbWVudUljb24gPSAobWVudSkgPT4gKDxpIGRhdGEtdGVzdD17YG1lbnUtaXRlbS0ke21lbnUubGFiZWx9YH0gY2xhc3NOYW1lPXtgZmEgJHttZW51Lmljb259YH0vPik7XG4gICAgY29uc3QgaGFuZGxlTWVudVNlbGVjdGlvbiA9IChpdGVtQ2hvc2UpID0+IHtcbiAgICAgICAgaWYgKGl0ZW1DaG9zZS5rZXkgPT09IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5EYkNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHNldFNob3dEYXRhYmFzZU1vZGFsKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW1DaG9zZS5rZXkgPT09IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5Hb29nbGVTaGVldHMpIHtcbiAgICAgICAgICAgIHNldFNob3dEYXRhYmFzZU1vZGFsKHRydWUpO1xuICAgICAgICAgICAgc2V0RW5naW5lKCdHb29nbGUgU2hlZXRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbUNob3NlLmtleSA9PT0gR2xvYmFsTWVudURhdGFPcHRpb25zLkNTVlVwbG9hZCkge1xuICAgICAgICAgICAgc2V0U2hvd0NTVlVwbG9hZE1vZGFsKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW1DaG9zZS5rZXkgPT09IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5FeGNlbFVwbG9hZCkge1xuICAgICAgICAgICAgc2V0U2hvd0V4Y2VsVXBsb2FkTW9kYWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbUNob3NlLmtleSA9PT0gR2xvYmFsTWVudURhdGFPcHRpb25zLkNvbHVtbmFyVXBsb2FkKSB7XG4gICAgICAgICAgICBzZXRTaG93Q29sdW1uYXJVcGxvYWRNb2RhbCh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlT25IaWRlTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIHNldEVuZ2luZSgnJyk7XG4gICAgICAgIHNldFNob3dEYXRhYmFzZU1vZGFsKGZhbHNlKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvb2x0aXBUZXh0ID0gdChcIkVuYWJsZSAnQWxsb3cgZmlsZSB1cGxvYWRzIHRvIGRhdGFiYXNlJyBpbiBhbnkgZGF0YWJhc2UncyBzZXR0aW5nc1wiKTtcbiAgICBjb25zdCBidWlsZE1lbnVJdGVtID0gKGl0ZW0pID0+IGl0ZW0uZGlzYWJsZSA/ICg8TWVudS5JdGVtIGtleT17aXRlbS5uYW1lfSBjc3M9e3N0eWxlZERpc2FibGVkfSBkaXNhYmxlZD5cbiAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PVwidG9wXCIgdGl0bGU9e3Rvb2x0aXBUZXh0fT5cbiAgICAgICAgICB7aXRlbS5sYWJlbH1cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgPC9NZW51Lkl0ZW0+KSA6ICg8TWVudS5JdGVtIGtleT17aXRlbS5uYW1lfSBjc3M9e3N0eWxlZENoaWxkTWVudX0+XG4gICAgICAgIHtpdGVtLnVybCA/IDxhIGhyZWY9e2l0ZW0udXJsfT4ge2l0ZW0ubGFiZWx9IDwvYT4gOiBpdGVtLmxhYmVsfVxuICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICBjb25zdCBvbk1lbnVPcGVuID0gKG9wZW5LZXlzKSA9PiB7XG4gICAgICAgIC8vIFdlIHNob3VsZCBxdWVyeSB0aGUgQVBJIG9ubHkgaWYgb3BlbmluZyBEYXRhIHN1Ym1lbnVzXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHJlc3QgZG9uJ3QgbmVlZCB0aGlzIGluZm9ybWF0aW9uLiBOb3QgdXNpbmdcbiAgICAgICAgLy8gXCJEYXRhXCIgZGlyZWN0bHkgc2luY2Ugd2UgbWlnaHQgY2hhbmdlIHRoZSBsYWJlbCBsYXRlciBvbj9cbiAgICAgICAgaWYgKG9wZW5LZXlzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgICFpc0VtcHR5KG9wZW5LZXlzPy5maWx0ZXIoKGtleSkgPT4ga2V5LmluY2x1ZGVzKGBzdWIyXyR7ZHJvcGRvd25JdGVtcz8uWzBdPy5sYWJlbH1gKSkpKSB7XG4gICAgICAgICAgICBpZiAoY2FuVXBsb2FkRGF0YSlcbiAgICAgICAgICAgICAgICBjaGVja0FsbG93VXBsb2FkcygpO1xuICAgICAgICAgICAgaWYgKGNhbkRhdGFiYXNlIHx8IGNhbkRhdGFzZXQpXG4gICAgICAgICAgICAgICAgZXhpc3RzTm9uRXhhbXBsZXNEYXRhYmFzZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IFJpZ2h0TWVudUV4dGVuc2lvbiA9IGV4dGVuc2lvbnNSZWdpc3RyeS5nZXQoJ25hdmJhci5yaWdodCcpO1xuICAgIGNvbnN0IFJpZ2h0TWVudUl0ZW1JY29uRXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldCgnbmF2YmFyLnJpZ2h0LW1lbnUuaXRlbS5pY29uJyk7XG4gICAgY29uc3QgaGFuZGxlRGF0YWJhc2VBZGQgPSAoKSA9PiBzZXRRdWVyeSh7IGRhdGFiYXNlQWRkZWQ6IHRydWUgfSk7XG4gICAgY29uc3QgaGFuZGxlTG9nb3V0ID0gKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVkdXgnKTtcbiAgICB9O1xuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgICByZXR1cm4gKDxTdHlsZWREaXYgYWxpZ249e2FsaWdufT5cbiAgICAgIHtjYW5EYXRhYmFzZSAmJiAoPERhdGFiYXNlTW9kYWwgb25IaWRlPXtoYW5kbGVPbkhpZGVNb2RhbH0gc2hvdz17c2hvd0RhdGFiYXNlTW9kYWx9IGRiRW5naW5lPXtlbmdpbmV9IG9uRGF0YWJhc2VBZGQ9e2hhbmRsZURhdGFiYXNlQWRkfS8+KX1cbiAgICAgIHtjYW5VcGxvYWRDU1YgJiYgKDxVcGxvYWREYXRhTW9kYWwgb25IaWRlPXsoKSA9PiBzZXRTaG93Q1NWVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93Q1NWVXBsb2FkTW9kYWx9IGFsbG93ZWRFeHRlbnNpb25zPXtDU1ZfRVhURU5TSU9OU30gdHlwZT1cImNzdlwiLz4pfVxuICAgICAge2NhblVwbG9hZEV4Y2VsICYmICg8VXBsb2FkRGF0YU1vZGFsIG9uSGlkZT17KCkgPT4gc2V0U2hvd0V4Y2VsVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93RXhjZWxVcGxvYWRNb2RhbH0gYWxsb3dlZEV4dGVuc2lvbnM9e0VYQ0VMX0VYVEVOU0lPTlN9IHR5cGU9XCJleGNlbFwiLz4pfVxuICAgICAge2NhblVwbG9hZENvbHVtbmFyICYmICg8VXBsb2FkRGF0YU1vZGFsIG9uSGlkZT17KCkgPT4gc2V0U2hvd0NvbHVtbmFyVXBsb2FkTW9kYWwoZmFsc2UpfSBzaG93PXtzaG93Q29sdW1uYXJVcGxvYWRNb2RhbH0gYWxsb3dlZEV4dGVuc2lvbnM9e0NPTFVNTkFSX0VYVEVOU0lPTlN9IHR5cGU9XCJjb2x1bW5hclwiLz4pfVxuICAgICAge2Vudmlyb25tZW50VGFnPy50ZXh0ICYmICg8TGFiZWwgY3NzPXt7IGJvcmRlclJhZGl1czogYCR7dGhlbWUuZ3JpZFVuaXQgKiAxMjV9cHhgIH19IGNvbG9yPXsvXiMoPzpbMC05YS1mXXszfSl7MSwyfSQvaS50ZXN0KGVudmlyb25tZW50VGFnLmNvbG9yKVxuICAgICAgICAgICAgICAgID8gZW52aXJvbm1lbnRUYWcuY29sb3JcbiAgICAgICAgICAgICAgICA6IGdldCh0aGVtZS5jb2xvcnMsIGVudmlyb25tZW50VGFnLmNvbG9yKX0+XG4gICAgICAgICAgPHNwYW4gY3NzPXt0YWdTdHlsZXN9PntlbnZpcm9ubWVudFRhZy50ZXh0fTwvc3Bhbj5cbiAgICAgICAgPC9MYWJlbD4pfVxuICAgICAgPE1lbnUgY3NzPXtjc3MgYFxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgYH0gc2VsZWN0YWJsZT17ZmFsc2V9IG1vZGU9XCJob3Jpem9udGFsXCIgb25DbGljaz17aGFuZGxlTWVudVNlbGVjdGlvbn0gb25PcGVuQ2hhbmdlPXtvbk1lbnVPcGVufSBkaXNhYmxlZE92ZXJmbG93PlxuICAgICAgICB7UmlnaHRNZW51RXh0ZW5zaW9uICYmIDxSaWdodE1lbnVFeHRlbnNpb24gLz59XG4gICAgICAgIHshbmF2YmFyUmlnaHQudXNlcl9pc19hbm9ueW1vdXMgJiYgc2hvd0FjdGlvbkRyb3Bkb3duICYmICg8U3R5bGVkU3ViTWVudSBrZXk9XCJzdWIxXCIgZGF0YS10ZXN0PVwibmV3LWRyb3Bkb3duXCIgdGl0bGU9ezxJY29ucy5QbHVzT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX0gZGF0YS10ZXN0PVwibmV3LWRyb3Bkb3duLWljb25cIi8+fSBpY29uPXs8SWNvbnMuQ2FyZXREb3duT3V0bGluZWQgaWNvblNpemU9XCJ4c1wiLz59PlxuICAgICAgICAgICAge2Ryb3Bkb3duSXRlbXM/Lm1hcD8uKG1lbnUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhblNob3dDaGlsZCA9IG1lbnUuY2hpbGRzPy5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICEhaXRlbS5wZXJtKTtcbiAgICAgICAgICAgICAgICBpZiAobWVudS5jaGlsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhblNob3dDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICg8U3R5bGVkU3ViTWVudSBrZXk9e2BzdWIyXyR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9XCJkYXRhLW1lbnVcIiB0aXRsZT17bWVudS5sYWJlbH0gaWNvbj17bWVudUljb24obWVudSl9PlxuICAgICAgICAgICAgICAgICAgICAgIHttZW51Py5jaGlsZHM/Lm1hcD8uKChpdGVtLCBpZHgpID0+IHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJyAmJiBpdGVtLm5hbWUgJiYgaXRlbS5wZXJtID8gKDxGcmFnbWVudCBrZXk9e2l0ZW0ubmFtZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkeCA9PT0gMyAmJiA8TWVudS5EaXZpZGVyIC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZE1lbnVJdGVtKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0ZyYWdtZW50PikgOiBudWxsKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TdHlsZWRTdWJNZW51Pik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZW51LnVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmaW5kUGVybWlzc2lvbihtZW51LnBlcm0sIG1lbnUudmlldywgcm9sZXMpICYmICg8TWVudS5JdGVtIGtleT17bWVudS5sYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUobWVudS51cmwpID8gKDxMaW5rIHRvPXttZW51LnVybCB8fCAnJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBkYXRhLXRlc3Q9e2BtZW51LWl0ZW0tJHttZW51LmxhYmVsfWB9IGNsYXNzTmFtZT17YGZhICR7bWVudS5pY29ufWB9Lz57JyAnfVxuICAgICAgICAgICAgICAgICAgICAgICAge21lbnUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPikgOiAoPGEgaHJlZj17bWVudS51cmx9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgZGF0YS10ZXN0PXtgbWVudS1pdGVtLSR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9e2BmYSAke21lbnUuaWNvbn1gfS8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZW51LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT4pfVxuICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KSk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L1N0eWxlZFN1Yk1lbnU+KX1cbiAgICAgICAgPFN0eWxlZFN1Yk1lbnUga2V5PVwic3ViM19zZXR0aW5nc1wiIHRpdGxlPXt0KCdTZXR0aW5ncycpfSBpY29uPXs8SWNvbnMuQ2FyZXREb3duT3V0bGluZWQgaWNvblNpemU9XCJ4c1wiLz59PlxuICAgICAgICAgIHtzZXR0aW5ncz8ubWFwPy4oKHNlY3Rpb24sIGluZGV4KSA9PiBbXG4gICAgICAgICAgICA8TWVudS5JdGVtR3JvdXAga2V5PXtgJHtzZWN0aW9uLmxhYmVsfWB9IHRpdGxlPXtzZWN0aW9uLmxhYmVsfT5cbiAgICAgICAgICAgICAge3NlY3Rpb24/LmNoaWxkcz8ubWFwPy4oY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudUl0ZW1EaXNwbGF5ID0gUmlnaHRNZW51SXRlbUljb25FeHRlbnNpb24gPyAoPFN0eWxlZE1lbnVJdGVtV2l0aEljb24+XG4gICAgICAgICAgICAgICAgICAgICAge2NoaWxkLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDxSaWdodE1lbnVJdGVtSWNvbkV4dGVuc2lvbiBtZW51Q2hpbGQ9e2NoaWxkfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTWVudUl0ZW1XaXRoSWNvbj4pIDogKGNoaWxkLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoPE1lbnUuSXRlbSBrZXk9e2Ake2NoaWxkLmxhYmVsfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUoY2hpbGQudXJsKSA/ICg8TGluayB0bz17Y2hpbGQudXJsIHx8ICcnfT57bWVudUl0ZW1EaXNwbGF5fTwvTGluaz4pIDogKDxhIGhyZWY9e2NoaWxkLnVybH0+e21lbnVJdGVtRGlzcGxheX08L2E+KX1cbiAgICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvTWVudS5JdGVtR3JvdXA+LFxuICAgICAgICAgICAgaW5kZXggPCBzZXR0aW5ncy5sZW5ndGggLSAxICYmICg8TWVudS5EaXZpZGVyIGtleT17YGRpdmlkZXJfJHtpbmRleH1gfS8+KSxcbiAgICAgICAgXSl9XG5cbiAgICAgICAgICB7IW5hdmJhclJpZ2h0LnVzZXJfaXNfYW5vbnltb3VzICYmIFtcbiAgICAgICAgICAgIDxNZW51LkRpdmlkZXIga2V5PVwidXNlci1kaXZpZGVyXCIvPixcbiAgICAgICAgICAgIDxNZW51Lkl0ZW1Hcm91cCBrZXk9XCJ1c2VyLXNlY3Rpb25cIiB0aXRsZT17dCgnVXNlcicpfT5cbiAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnVzZXJfaW5mb191cmwgJiYgKDxNZW51Lkl0ZW0ga2V5PVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj17bmF2YmFyUmlnaHQudXNlcl9pbmZvX3VybH0+e3QoJ0luZm8nKX08L2E+XG4gICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KX1cbiAgICAgICAgICAgICAgPE1lbnUuSXRlbSBrZXk9XCJsb2dvdXRcIiBvbkNsaWNrPXtoYW5kbGVMb2dvdXR9PlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9e25hdmJhclJpZ2h0LnVzZXJfbG9nb3V0X3VybH0+e3QoJ0xvZ291dCcpfTwvYT5cbiAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+XG4gICAgICAgICAgICA8L01lbnUuSXRlbUdyb3VwPixcbiAgICAgICAgXX1cbiAgICAgICAgICB7KG5hdmJhclJpZ2h0LnZlcnNpb25fc3RyaW5nIHx8IG5hdmJhclJpZ2h0LnZlcnNpb25fc2hhKSAmJiBbXG4gICAgICAgICAgICA8TWVudS5EaXZpZGVyIGtleT1cInZlcnNpb24taW5mby1kaXZpZGVyXCIvPixcbiAgICAgICAgICAgIDxNZW51Lkl0ZW1Hcm91cCBrZXk9XCJhYm91dC1zZWN0aW9uXCIgdGl0bGU9e3QoJ0Fib3V0Jyl9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFib3V0LXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQuc2hvd193YXRlcm1hcmsgJiYgKDxkaXYgY3NzPXt2ZXJzaW9uSW5mb1N0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQb3dlcmVkIGJ5IEFwYWNoZSBTdXBlcnNldCcpfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQudmVyc2lvbl9zdHJpbmcgJiYgKDxkaXYgY3NzPXt2ZXJzaW9uSW5mb1N0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdWZXJzaW9uJyl9OiB7bmF2YmFyUmlnaHQudmVyc2lvbl9zdHJpbmd9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgICAgICAgIHtuYXZiYXJSaWdodC52ZXJzaW9uX3NoYSAmJiAoPGRpdiBjc3M9e3ZlcnNpb25JbmZvU3R5bGVzfT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ1NIQScpfToge25hdmJhclJpZ2h0LnZlcnNpb25fc2hhfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQuYnVpbGRfbnVtYmVyICYmICg8ZGl2IGNzcz17dmVyc2lvbkluZm9TdHlsZXN9PlxuICAgICAgICAgICAgICAgICAgICB7dCgnQnVpbGQnKX06IHtuYXZiYXJSaWdodC5idWlsZF9udW1iZXJ9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvTWVudS5JdGVtR3JvdXA+LFxuICAgICAgICBdfVxuICAgICAgICA8L1N0eWxlZFN1Yk1lbnU+XG4gICAgICAgIHtuYXZiYXJSaWdodC5zaG93X2xhbmd1YWdlX3BpY2tlciAmJiAoPExhbmd1YWdlUGlja2VyIGxvY2FsZT17bmF2YmFyUmlnaHQubG9jYWxlfSBsYW5ndWFnZXM9e25hdmJhclJpZ2h0Lmxhbmd1YWdlc30vPil9XG4gICAgICA8L01lbnU+XG4gICAgICB7bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl91cmwgJiYgKDw+XG4gICAgICAgICAgPFN0eWxlZEFuY2hvciBocmVmPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX3VybH0gdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9yZWZlcnJlclwiIHRpdGxlPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX3RleHQgfHwgdCgnRG9jdW1lbnRhdGlvbicpfT5cbiAgICAgICAgICAgIHtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX2ljb24gPyAoPGkgY2xhc3NOYW1lPXtuYXZiYXJSaWdodC5kb2N1bWVudGF0aW9uX2ljb259Lz4pIDogKDxpIGNsYXNzTmFtZT1cImZhIGZhLXF1ZXN0aW9uXCIvPil9XG4gICAgICAgICAgPC9TdHlsZWRBbmNob3I+XG4gICAgICAgICAgPHNwYW4+Jm5ic3A7PC9zcGFuPlxuICAgICAgICA8Lz4pfVxuICAgICAge25hdmJhclJpZ2h0LmJ1Z19yZXBvcnRfdXJsICYmICg8PlxuICAgICAgICAgIDxTdHlsZWRBbmNob3IgaHJlZj17bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF91cmx9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXJcIiB0aXRsZT17bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF90ZXh0IHx8IHQoJ1JlcG9ydCBhIGJ1ZycpfT5cbiAgICAgICAgICAgIHtuYXZiYXJSaWdodC5idWdfcmVwb3J0X2ljb24gPyAoPGkgY2xhc3NOYW1lPXtuYXZiYXJSaWdodC5idWdfcmVwb3J0X2ljb259Lz4pIDogKDxpIGNsYXNzTmFtZT1cImZhIGZhLWJ1Z1wiLz4pfVxuICAgICAgICAgIDwvU3R5bGVkQW5jaG9yPlxuICAgICAgICAgIDxzcGFuPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgPC8+KX1cbiAgICAgIHtuYXZiYXJSaWdodC51c2VyX2lzX2Fub255bW91cyAmJiAoPFN0eWxlZEFuY2hvciBocmVmPXtuYXZiYXJSaWdodC51c2VyX2xvZ2luX3VybH0+XG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZncgZmEtc2lnbi1pblwiLz5cbiAgICAgICAgICB7dCgnTG9naW4nKX1cbiAgICAgICAgPC9TdHlsZWRBbmNob3I+KX1cbiAgICAgIDxUZWxlbWV0cnlQaXhlbCB2ZXJzaW9uPXtuYXZiYXJSaWdodC52ZXJzaW9uX3N0cmluZ30gc2hhPXtuYXZiYXJSaWdodC52ZXJzaW9uX3NoYX0gYnVpbGQ9e25hdmJhclJpZ2h0LmJ1aWxkX251bWJlcn0vPlxuICAgIDwvU3R5bGVkRGl2Pik7XG59O1xuY29uc3QgUmlnaHRNZW51V2l0aFF1ZXJ5V3JhcHBlciA9IHByb3BzID0+IHtcbiAgICBjb25zdCBbLCBzZXRRdWVyeV0gPSB1c2VRdWVyeVBhcmFtcyh7XG4gICAgICAgIGRhdGFiYXNlQWRkZWQ6IEJvb2xlYW5QYXJhbSxcbiAgICAgICAgZGF0YXNldEFkZGVkOiBCb29sZWFuUGFyYW0sXG4gICAgfSk7XG4gICAgcmV0dXJuIDxSaWdodE1lbnUgc2V0UXVlcnk9e3NldFF1ZXJ5fSB7Li4ucHJvcHN9Lz47XG59O1xuLy8gUXVlcnkgcGFyYW0gbWFuaXB1bGF0aW9uIHJlcXVpcmVzIHRoYXQsIGR1cmluZyB0aGUgc2V0dXAsIHRoZVxuLy8gUXVlcnlQYXJhbVByb3ZpZGVyIGlzIHByZXNlbnQgYW5kIGNvbmZpZ3VyZWQuXG4vLyBTdXBlcnNldCBzdGlsbCBoYXMgbXVsdGlwbGUgZW50cnkgcG9pbnRzLCBhbmQgbm90IGFsbCBvZiB0aGVtIGhhdmVcbi8vIHRoZSBzYW1lIHNldHVwLCBhbmQgY3JpdGljYWxseSwgbm90IGFsbCBvZiB0aGVtIGhhdmUgdGhlIFF1ZXJ5UGFyYW1Qcm92aWRlci5cbi8vIFRoaXMgd3JhcHBlciBlbnN1cmVzIHRoZSBSaWdodE1lbnUgcmVuZGVycyByZWdhcmRsZXNzIG9mIHRoZSBwcm92aWRlciBiZWluZyBwcmVzZW50LlxuY2xhc3MgUmlnaHRNZW51RXJyb3JXcmFwcGVyIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICB9O1xuICAgIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB7IGhhc0Vycm9yOiB0cnVlIH07XG4gICAgfVxuICAgIG5vb3AgPSAoKSA9PiB7IH07XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIDxSaWdodE1lbnUgc2V0UXVlcnk9e3RoaXMubm9vcH0gey4uLnRoaXMucHJvcHN9Lz47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gICAgfVxufVxuY29uc3QgUmlnaHRNZW51V3JhcHBlciA9IHByb3BzID0+ICg8UmlnaHRNZW51RXJyb3JXcmFwcGVyIHsuLi5wcm9wc30+XG4gICAgPFJpZ2h0TWVudVdpdGhRdWVyeVdyYXBwZXIgey4uLnByb3BzfS8+XG4gIDwvUmlnaHRNZW51RXJyb3JXcmFwcGVyPik7XG5leHBvcnQgZGVmYXVsdCBSaWdodE1lbnVXcmFwcGVyO1xuIl19 */\"), color: /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color) ?\n      environmentTag.color :\n      _get(theme.colors, environmentTag.color), children:\n      _jsx(\"span\", { css: tagStyles, children: environmentTag.text }) }\n    ),\n    _jsxs(Menu, { css: css`\n          display: flex;\n          flex-direction: row;\n        `, selectable: false, mode: \"horizontal\", onClick: handleMenuSelection, onOpenChange: onMenuOpen, disabledOverflow: true, children: [\n      RightMenuExtension && _jsx(RightMenuExtension, {}),\n      !navbarRight.user_is_anonymous && showActionDropdown && _jsx(StyledSubMenu, { title: _jsx(Icons.PlusOutlined, { iconColor: theme.colors.primary.dark1 }), icon: _jsx(Icons.CaretDownOutlined, { iconSize: \"xs\" }), children:\n        dropdownItems == null ? void 0 : dropdownItems.map == null ? void 0 : dropdownItems.map((menu) => {var _menu$childs;\n          const canShowChild = (_menu$childs = menu.childs) == null ? void 0 : _menu$childs.some((item) => typeof item === 'object' && !!item.perm);\n          if (menu.childs) {\n            if (canShowChild) {var _menu$childs2;\n              return _jsx(StyledSubMenu, { className: \"data-menu\", title: menu.label, icon: menuIcon(menu), children:\n                menu == null ? void 0 : (_menu$childs2 = menu.childs) == null ? void 0 : _menu$childs2.map == null ? void 0 : _menu$childs2.map((item, idx) => typeof item !== 'string' && item.name && item.perm ? _jsxs(Fragment, { children: [\n                  idx === 3 && _jsx(Menu.Divider, {}),\n                  buildMenuItem(item)] }, item.name\n                ) : null) }, `sub2_${menu.label}`\n              );\n            }\n            if (!menu.url) {\n              return null;\n            }\n          }\n          return findPermission(menu.perm, menu.view, roles) && _jsx(Menu.Item, { children:\n            isFrontendRoute(menu.url) ? _jsxs(Link, { to: menu.url || '', children: [\n              _jsx(\"i\", { className: `fa ${menu.icon}` }), ' ',\n              menu.label] }\n            ) : _jsxs(\"a\", { href: menu.url, children: [\n              _jsx(\"i\", { className: `fa ${menu.icon}` }), ' ',\n              menu.label] }\n            ) }, menu.label\n          );\n        }) }, \"sub1\"\n      ),\n      _jsxs(StyledSubMenu, { title: t('Settings'), icon: _jsx(Icons.CaretDownOutlined, { iconSize: \"xs\" }), children: [\n        settings == null ? void 0 : settings.map == null ? void 0 : settings.map((section, index) => {var _section$childs;return [\n          _jsx(Menu.ItemGroup, { title: section.label, children:\n            section == null ? void 0 : (_section$childs = section.childs) == null ? void 0 : _section$childs.map == null ? void 0 : _section$childs.map((child) => {\n              if (typeof child !== 'string') {\n                const menuItemDisplay = RightMenuItemIconExtension ? _jsxs(StyledMenuItemWithIcon, { children: [\n                  child.label,\n                  _jsx(RightMenuItemIconExtension, { menuChild: child })] }\n                ) : child.label;\n                return _jsx(Menu.Item, { children:\n                  isFrontendRoute(child.url) ? _jsx(Link, { to: child.url || '', children: menuItemDisplay }) : _jsx(\"a\", { href: child.url, children: menuItemDisplay }) }, `${child.label}`\n                );\n              }\n              return null;\n            }) }, `${section.label}`\n          ),\n          index < settings.length - 1 && _jsx(Menu.Divider, {}, `divider_${index}`)];}\n        ),\n\n        !navbarRight.user_is_anonymous && [\n        _jsx(Menu.Divider, {}, \"user-divider\"),\n        _jsxs(Menu.ItemGroup, { title: t('User'), children: [\n          navbarRight.user_info_url && _jsx(Menu.Item, { children:\n            _jsx(\"a\", { href: navbarRight.user_info_url, children: t('Info') }) }, \"info\"\n          ),\n          _jsx(Menu.Item, { onClick: handleLogout, children:\n            _jsx(\"a\", { href: navbarRight.user_logout_url, children: t('Logout') }) }, \"logout\"\n          )] }, \"user-section\"\n        )],\n\n        (navbarRight.version_string || navbarRight.version_sha) && [\n        _jsx(Menu.Divider, {}, \"version-info-divider\"),\n        _jsx(Menu.ItemGroup, { title: t('About'), children:\n          _jsxs(\"div\", { className: \"about-section\", children: [\n            navbarRight.show_watermark && _jsx(\"div\", { css: versionInfoStyles, children:\n              t('Powered by Apache Superset') }\n            ),\n            navbarRight.version_string && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('Version'), \": \", navbarRight.version_string] }\n            ),\n            navbarRight.version_sha && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('SHA'), \": \", navbarRight.version_sha] }\n            ),\n            navbarRight.build_number && _jsxs(\"div\", { css: versionInfoStyles, children: [\n              t('Build'), \": \", navbarRight.build_number] }\n            )] }\n          ) }, \"about-section\"\n        )]] }, \"sub3_settings\"\n\n      ),\n      navbarRight.show_language_picker && _jsx(LanguagePicker, { locale: navbarRight.locale, languages: navbarRight.languages })] }\n    ),\n    navbarRight.documentation_url && _jsxs(_Fragment, { children: [\n      _jsx(StyledAnchor, { href: navbarRight.documentation_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.documentation_text || t('Documentation'), children:\n        navbarRight.documentation_icon ? _jsx(\"i\", { className: navbarRight.documentation_icon }) : _jsx(\"i\", { className: \"fa fa-question\" }) }\n      ),\n      _jsx(\"span\", { children: \"\\xA0\" })] }\n    ),\n    navbarRight.bug_report_url && _jsxs(_Fragment, { children: [\n      _jsx(StyledAnchor, { href: navbarRight.bug_report_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.bug_report_text || t('Report a bug'), children:\n        navbarRight.bug_report_icon ? _jsx(\"i\", { className: navbarRight.bug_report_icon }) : _jsx(\"i\", { className: \"fa fa-bug\" }) }\n      ),\n      _jsx(\"span\", { children: \"\\xA0\" })] }\n    ),\n    navbarRight.user_is_anonymous && _jsxs(StyledAnchor, { href: navbarRight.user_login_url, children: [\n      _jsx(\"i\", { className: \"fa fa-fw fa-sign-in\" }),\n      t('Login')] }\n    ),\n    _jsx(TelemetryPixel, { version: navbarRight.version_string, sha: navbarRight.version_sha, build: navbarRight.build_number })] }\n  );\n};\nconst RightMenuWithQueryWrapper = (props) => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam\n  });\n  return _jsx(RightMenu, { setQuery: setQuery, ...props });\n};\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\nclass RightMenuErrorWrapper extends PureComponent {constructor(...args) {super(...args);this.\n    state = {\n      hasError: false\n    };this.\n\n\n\n    noop = () => {};}static getDerivedStateFromError() {return { hasError: true };}\n  render() {\n    if (this.state.hasError) {\n      return _jsx(RightMenu, { setQuery: this.noop, ...this.props });\n    }\n    return this.props.children;\n  }\n}\nconst RightMenuWrapper = (props) => _jsx(RightMenuErrorWrapper, { ...props, children:\n  _jsx(RightMenuWithQueryWrapper, { ...props }) }\n);\nexport default RightMenuWrapper;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}