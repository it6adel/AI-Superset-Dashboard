{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport Card from 'src/components/Card';\nimport ProgressBar from 'src/components/ProgressBar';\nimport { t, useTheme } from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { queryEditorSetSql, cloneQueryToNewTab, fetchQueryResults, clearQueryResults, removeQuery } from 'src/SqlLab/actions/sqlLab';\nimport TableView from 'src/components/TableView';\nimport Button from 'src/components/Button';\nimport { fDuration, extendedDayjs } from 'src/utils/dates';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport ResultSet from '../ResultSet';\nimport HighlightedSql from '../HighlightedSql';\nimport { StaticPosition, StyledTooltip } from './styles';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst openQuery = (id) => {\n  const url = `/sqllab?queryId=${id}`;\n  window.open(url);\n};\nconst QueryTable = ({ columns = ['started', 'duration', 'rows'], queries = [], onUserClicked = () => undefined, onDbClicked = () => undefined, displayLimit, latestQueryId }) => {\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const QUERY_HISTORY_TABLE_HEADERS_LOCALIZED = {\n    state: t('State'),\n    started: t('Started'),\n    duration: t('Duration'),\n    progress: t('Progress'),\n    rows: t('Rows'),\n    sql: t('SQL'),\n    results: t('Results'),\n    actions: t('Actions')\n  };\n  const setHeaders = (column) => {\n    if (column === 'sql') {\n      return column.toUpperCase();\n    }\n    return column.charAt(0).toUpperCase().concat(column.slice(1));\n  };\n  const columnsOfTable = useMemo(() => columns.map((column) => ({\n    accessor: column,\n    Header: QUERY_HISTORY_TABLE_HEADERS_LOCALIZED[column] || setHeaders(column),\n    disableSortBy: true\n  })), [columns]);\n  const user = useSelector((state) => state.user);\n  const data = useMemo(() => {\n    const restoreSql = (query) => {\n      dispatch(queryEditorSetSql({ id: query.sqlEditorId }, query.sql, query.id));\n    };\n    const openQueryInNewTab = (query) => {\n      dispatch(cloneQueryToNewTab(query, true));\n    };\n    const openAsyncResults = (query, displayLimit) => {\n      dispatch(fetchQueryResults(query, displayLimit));\n    };\n    const statusAttributes = {\n      success: {\n        config: {\n          icon: _jsx(Icons.CheckOutlined, { iconColor: theme.colors.success.base, iconSize: \"m\" }),\n          // icon: <Icons.Edit iconSize=\"xl\" />,\n          label: t('Success')\n        }\n      },\n      failed: {\n        config: {\n          icon: _jsx(Icons.CloseOutlined, { iconColor: theme.colors.error.base, iconSize: \"m\" }),\n          label: t('Failed')\n        }\n      },\n      stopped: {\n        config: {\n          icon: _jsx(Icons.CloseOutlined, { iconColor: theme.colors.error.base, iconSize: \"m\" }),\n          label: t('Failed')\n        }\n      },\n      running: {\n        config: {\n          icon: _jsx(Icons.LoadingOutlined, { iconColor: theme.colors.primary.base, iconSize: \"m\" }),\n          label: t('Running')\n        }\n      },\n      fetching: {\n        config: {\n          icon: _jsx(Icons.LoadingOutlined, { iconColor: theme.colors.primary.base, iconSize: \"m\" }),\n          label: t('Fetching')\n        }\n      },\n      timed_out: {\n        config: {\n          icon: _jsx(Icons.ClockCircleOutlined, { iconColor: theme.colors.error.base, iconSize: \"m\" }),\n          label: t('Offline')\n        }\n      },\n      scheduled: {\n        config: {\n          icon: _jsx(Icons.LoadingOutlined, { iconColor: theme.colors.warning.base, iconSize: \"m\" }),\n          label: t('Scheduled')\n        }\n      },\n      pending: {\n        config: {\n          icon: _jsx(Icons.LoadingOutlined, { iconColor: theme.colors.warning.base, iconSize: \"m\" }),\n          label: t('Scheduled')\n        }\n      },\n      error: {\n        config: {\n          icon: _jsx(Icons.Error, { iconColor: theme.colors.error.base, iconSize: \"m\" }),\n          label: t('Unknown Status')\n        }\n      },\n      started: {\n        config: {\n          icon: _jsx(Icons.LoadingOutlined, { iconColor: theme.colors.primary.base, iconSize: \"m\" }),\n          label: t('Started')\n        }\n      }\n    };\n    return queries.\n    map((query) => {\n      const { state, sql, progress, ...rest } = query;\n      const q = rest;\n      const status = statusAttributes[state] || statusAttributes.error;\n      if (q.endDttm) {\n        q.duration = _jsx(Label, { monospace: true, children: fDuration(q.startDttm, q.endDttm) });\n      }\n      q.user = _jsx(Button, { buttonSize: \"small\", buttonStyle: \"link\", onClick: () => onUserClicked(q.userId), children:\n        q.user }\n      );\n      q.db = _jsx(Button, { buttonSize: \"small\", buttonStyle: \"link\", onClick: () => onDbClicked(q.dbId), children:\n        q.db }\n      );\n      q.started = _jsx(Label, { monospace: true, children:\n        extendedDayjs(q.startDttm).format('L HH:mm:ss') }\n      );\n      q.querylink = _jsxs(Button, { buttonSize: \"small\", buttonStyle: \"link\", onClick: () => openQuery(q.queryId), children: [\n        _jsx(Icons.Full, { iconSize: \"m\", iconColor: theme.colors.primary.dark1 }),\n        t('Edit')] }\n      );\n      q.sql = _jsx(Card, { css: [StaticPosition, process.env.NODE_ENV === \"production\" ? \"\" : \";label:q-sql;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FkZWwvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1F1ZXJ5VGFibGUvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZKMkIiLCJmaWxlIjoiL2hvbWUvYWRlbC9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvUXVlcnlUYWJsZS9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgUHJvZ3Jlc3NCYXIgZnJvbSAnc3JjL2NvbXBvbmVudHMvUHJvZ3Jlc3NCYXInO1xuaW1wb3J0IHsgdCwgdXNlVGhlbWUgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBxdWVyeUVkaXRvclNldFNxbCwgY2xvbmVRdWVyeVRvTmV3VGFiLCBmZXRjaFF1ZXJ5UmVzdWx0cywgY2xlYXJRdWVyeVJlc3VsdHMsIHJlbW92ZVF1ZXJ5LCB9IGZyb20gJ3NyYy9TcWxMYWIvYWN0aW9ucy9zcWxMYWInO1xuaW1wb3J0IFRhYmxlVmlldyBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZVZpZXcnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgZkR1cmF0aW9uLCBleHRlbmRlZERheWpzIH0gZnJvbSAnc3JjL3V0aWxzL2RhdGVzJztcbmltcG9ydCBJY29ucyBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1Rvb2x0aXAnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbFRyaWdnZXInO1xuaW1wb3J0IFJlc3VsdFNldCBmcm9tICcuLi9SZXN1bHRTZXQnO1xuaW1wb3J0IEhpZ2hsaWdodGVkU3FsIGZyb20gJy4uL0hpZ2hsaWdodGVkU3FsJztcbmltcG9ydCB7IFN0YXRpY1Bvc2l0aW9uLCBTdHlsZWRUb29sdGlwIH0gZnJvbSAnLi9zdHlsZXMnO1xuY29uc3Qgb3BlblF1ZXJ5ID0gKGlkKSA9PiB7XG4gICAgY29uc3QgdXJsID0gYC9zcWxsYWI/cXVlcnlJZD0ke2lkfWA7XG4gICAgd2luZG93Lm9wZW4odXJsKTtcbn07XG5jb25zdCBRdWVyeVRhYmxlID0gKHsgY29sdW1ucyA9IFsnc3RhcnRlZCcsICdkdXJhdGlvbicsICdyb3dzJ10sIHF1ZXJpZXMgPSBbXSwgb25Vc2VyQ2xpY2tlZCA9ICgpID0+IHVuZGVmaW5lZCwgb25EYkNsaWNrZWQgPSAoKSA9PiB1bmRlZmluZWQsIGRpc3BsYXlMaW1pdCwgbGF0ZXN0UXVlcnlJZCwgfSkgPT4ge1xuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gICAgY29uc3QgUVVFUllfSElTVE9SWV9UQUJMRV9IRUFERVJTX0xPQ0FMSVpFRCA9IHtcbiAgICAgICAgc3RhdGU6IHQoJ1N0YXRlJyksXG4gICAgICAgIHN0YXJ0ZWQ6IHQoJ1N0YXJ0ZWQnKSxcbiAgICAgICAgZHVyYXRpb246IHQoJ0R1cmF0aW9uJyksXG4gICAgICAgIHByb2dyZXNzOiB0KCdQcm9ncmVzcycpLFxuICAgICAgICByb3dzOiB0KCdSb3dzJyksXG4gICAgICAgIHNxbDogdCgnU1FMJyksXG4gICAgICAgIHJlc3VsdHM6IHQoJ1Jlc3VsdHMnKSxcbiAgICAgICAgYWN0aW9uczogdCgnQWN0aW9ucycpLFxuICAgIH07XG4gICAgY29uc3Qgc2V0SGVhZGVycyA9IChjb2x1bW4pID0+IHtcbiAgICAgICAgaWYgKGNvbHVtbiA9PT0gJ3NxbCcpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4udG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sdW1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpLmNvbmNhdChjb2x1bW4uc2xpY2UoMSkpO1xuICAgIH07XG4gICAgY29uc3QgY29sdW1uc09mVGFibGUgPSB1c2VNZW1vKCgpID0+IGNvbHVtbnMubWFwKGNvbHVtbiA9PiAoe1xuICAgICAgICBhY2Nlc3NvcjogY29sdW1uLFxuICAgICAgICBIZWFkZXI6IFFVRVJZX0hJU1RPUllfVEFCTEVfSEVBREVSU19MT0NBTElaRURbY29sdW1uXSB8fCBzZXRIZWFkZXJzKGNvbHVtbiksXG4gICAgICAgIGRpc2FibGVTb3J0Qnk6IHRydWUsXG4gICAgfSkpLCBbY29sdW1uc10pO1xuICAgIGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKTtcbiAgICBjb25zdCBkYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3RvcmVTcWwgPSAocXVlcnkpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoKHF1ZXJ5RWRpdG9yU2V0U3FsKHsgaWQ6IHF1ZXJ5LnNxbEVkaXRvcklkIH0sIHF1ZXJ5LnNxbCwgcXVlcnkuaWQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3BlblF1ZXJ5SW5OZXdUYWIgPSAocXVlcnkpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGNsb25lUXVlcnlUb05ld1RhYihxdWVyeSwgdHJ1ZSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvcGVuQXN5bmNSZXN1bHRzID0gKHF1ZXJ5LCBkaXNwbGF5TGltaXQpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGZldGNoUXVlcnlSZXN1bHRzKHF1ZXJ5LCBkaXNwbGF5TGltaXQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RhdHVzQXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogKDxJY29ucy5DaGVja091dGxpbmVkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLnN1Y2Nlc3MuYmFzZX0gaWNvblNpemU9XCJtXCIvPiksXG4gICAgICAgICAgICAgICAgICAgIC8vIGljb246IDxJY29ucy5FZGl0IGljb25TaXplPVwieGxcIiAvPixcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1N1Y2Nlc3MnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhaWxlZDoge1xuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAoPEljb25zLkNsb3NlT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuZXJyb3IuYmFzZX0gaWNvblNpemU9XCJtXCIvPiksXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdGYWlsZWQnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3BwZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogKDxJY29ucy5DbG9zZU91dGxpbmVkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmVycm9yLmJhc2V9IGljb25TaXplPVwibVwiLz4pLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnRmFpbGVkJyksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydW5uaW5nOiB7XG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICg8SWNvbnMuTG9hZGluZ091dGxpbmVkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLnByaW1hcnkuYmFzZX0gaWNvblNpemU9XCJtXCIvPiksXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdSdW5uaW5nJyksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmZXRjaGluZzoge1xuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAoPEljb25zLkxvYWRpbmdPdXRsaW5lZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJhc2V9IGljb25TaXplPVwibVwiLz4pLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnRmV0Y2hpbmcnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVkX291dDoge1xuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAoPEljb25zLkNsb2NrQ2lyY2xlT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuZXJyb3IuYmFzZX0gaWNvblNpemU9XCJtXCIvPiksXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdPZmZsaW5lJyksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY2hlZHVsZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogKDxJY29ucy5Mb2FkaW5nT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMud2FybmluZy5iYXNlfSBpY29uU2l6ZT1cIm1cIi8+KSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1NjaGVkdWxlZCcpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGVuZGluZzoge1xuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAoPEljb25zLkxvYWRpbmdPdXRsaW5lZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy53YXJuaW5nLmJhc2V9IGljb25TaXplPVwibVwiLz4pLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnU2NoZWR1bGVkJyksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAoPEljb25zLkVycm9yIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmVycm9yLmJhc2V9IGljb25TaXplPVwibVwiLz4pLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnVW5rbm93biBTdGF0dXMnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogKDxJY29ucy5Mb2FkaW5nT3V0bGluZWQgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5iYXNlfSBpY29uU2l6ZT1cIm1cIi8+KSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1N0YXJ0ZWQnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHF1ZXJpZXNcbiAgICAgICAgICAgIC5tYXAocXVlcnkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSwgc3FsLCBwcm9ncmVzcywgLi4ucmVzdCB9ID0gcXVlcnk7XG4gICAgICAgICAgICBjb25zdCBxID0gcmVzdDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHN0YXR1c0F0dHJpYnV0ZXNbc3RhdGVdIHx8IHN0YXR1c0F0dHJpYnV0ZXMuZXJyb3I7XG4gICAgICAgICAgICBpZiAocS5lbmREdHRtKSB7XG4gICAgICAgICAgICAgICAgcS5kdXJhdGlvbiA9ICg8TGFiZWwgbW9ub3NwYWNlPntmRHVyYXRpb24ocS5zdGFydER0dG0sIHEuZW5kRHR0bSl9PC9MYWJlbD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcS51c2VyID0gKDxCdXR0b24gYnV0dG9uU2l6ZT1cInNtYWxsXCIgYnV0dG9uU3R5bGU9XCJsaW5rXCIgb25DbGljaz17KCkgPT4gb25Vc2VyQ2xpY2tlZChxLnVzZXJJZCl9PlxuICAgICAgICAgICAge3EudXNlcn1cbiAgICAgICAgICA8L0J1dHRvbj4pO1xuICAgICAgICAgICAgcS5kYiA9ICg8QnV0dG9uIGJ1dHRvblNpemU9XCJzbWFsbFwiIGJ1dHRvblN0eWxlPVwibGlua1wiIG9uQ2xpY2s9eygpID0+IG9uRGJDbGlja2VkKHEuZGJJZCl9PlxuICAgICAgICAgICAge3EuZGJ9XG4gICAgICAgICAgPC9CdXR0b24+KTtcbiAgICAgICAgICAgIHEuc3RhcnRlZCA9ICg8TGFiZWwgbW9ub3NwYWNlPlxuICAgICAgICAgICAge2V4dGVuZGVkRGF5anMocS5zdGFydER0dG0pLmZvcm1hdCgnTCBISDptbTpzcycpfVxuICAgICAgICAgIDwvTGFiZWw+KTtcbiAgICAgICAgICAgIHEucXVlcnlsaW5rID0gKDxCdXR0b24gYnV0dG9uU2l6ZT1cInNtYWxsXCIgYnV0dG9uU3R5bGU9XCJsaW5rXCIgb25DbGljaz17KCkgPT4gb3BlblF1ZXJ5KHEucXVlcnlJZCl9PlxuICAgICAgICAgICAgPEljb25zLkZ1bGwgaWNvblNpemU9XCJtXCIgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX0vPlxuICAgICAgICAgICAge3QoJ0VkaXQnKX1cbiAgICAgICAgICA8L0J1dHRvbj4pO1xuICAgICAgICAgICAgcS5zcWwgPSAoPENhcmQgY3NzPXtbU3RhdGljUG9zaXRpb25dfT5cbiAgICAgICAgICAgIDxIaWdobGlnaHRlZFNxbCBzcWw9e3NxbH0gcmF3U3FsPXtxLmV4ZWN1dGVkU3FsfSBzaHJpbmsgbWF4V2lkdGg9ezYwfS8+XG4gICAgICAgICAgPC9DYXJkPik7XG4gICAgICAgICAgICBpZiAocS5yZXN1bHRzS2V5KSB7XG4gICAgICAgICAgICAgICAgcS5yZXN1bHRzID0gKDxNb2RhbFRyaWdnZXIgY2xhc3NOYW1lPVwiUmVzdWx0c01vZGFsXCIgdHJpZ2dlck5vZGU9ezxCdXR0b24gYnV0dG9uU2l6ZT1cInhzbWFsbFwiIGJ1dHRvblN0eWxlPVwidGVydGlhcnlcIj5cbiAgICAgICAgICAgICAgICAgIHt0KCdWaWV3Jyl9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+fSBtb2RhbFRpdGxlPXt0KCdEYXRhIHByZXZpZXcnKX0gYmVmb3JlT3Blbj17KCkgPT4gb3BlbkFzeW5jUmVzdWx0cyhxdWVyeSwgZGlzcGxheUxpbWl0KX0gb25FeGl0PXsoKSA9PiBkaXNwYXRjaChjbGVhclF1ZXJ5UmVzdWx0cyhxdWVyeSkpfSBtb2RhbEJvZHk9ezxSZXN1bHRTZXQgc2hvd1NxbCBxdWVyeUlkPXtxdWVyeS5pZH0gaGVpZ2h0PXs0MDB9IGRpc3BsYXlMaW1pdD17ZGlzcGxheUxpbWl0fSBkZWZhdWx0UXVlcnlMaW1pdD17MTAwMH0vPn0gcmVzcG9uc2l2ZS8+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHEucmVzdWx0cyA9IDw+PC8+O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcS5wcm9ncmVzcyA9XG4gICAgICAgICAgICAgICAgc3RhdGUgPT09ICdzdWNjZXNzJyA/ICg8UHJvZ3Jlc3NCYXIgcGVyY2VudD17cGFyc2VJbnQocHJvZ3Jlc3MudG9GaXhlZCgwKSwgMTApfSBzdHJpcGVkIHNob3dJbmZvPXtmYWxzZX0vPikgOiAoPFByb2dyZXNzQmFyIHBlcmNlbnQ9e3BhcnNlSW50KHByb2dyZXNzLnRvRml4ZWQoMCksIDEwKX0gc3RyaXBlZC8+KTtcbiAgICAgICAgICAgIHEuc3RhdGUgPSAoPFRvb2x0aXAgdGl0bGU9e3N0YXR1cy5jb25maWcubGFiZWx9PntzdGF0dXMuY29uZmlnLmljb259PC9Ub29sdGlwPik7XG4gICAgICAgICAgICBxLmFjdGlvbnMgPSAoPGRpdj5cbiAgICAgICAgICAgIDxTdHlsZWRUb29sdGlwIG9uQ2xpY2s9eygpID0+IHJlc3RvcmVTcWwocXVlcnkpfSB0b29sdGlwPXt0KCdPdmVyd3JpdGUgdGV4dCBpbiB0aGUgZWRpdG9yIHdpdGggYSBxdWVyeSBvbiB0aGlzIHRhYmxlJyl9IHBsYWNlbWVudD1cInRvcFwiIGNsYXNzTmFtZT1cInBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgPEljb25zLkVkaXRPdXRsaW5lZCBpY29uU2l6ZT1cImxcIi8+XG4gICAgICAgICAgICA8L1N0eWxlZFRvb2x0aXA+XG4gICAgICAgICAgICA8U3R5bGVkVG9vbHRpcCBvbkNsaWNrPXsoKSA9PiBvcGVuUXVlcnlJbk5ld1RhYihxdWVyeSl9IHRvb2x0aXA9e3QoJ1J1biBxdWVyeSBpbiBhIG5ldyB0YWInKX0gcGxhY2VtZW50PVwidG9wXCIgY2xhc3NOYW1lPVwicG9pbnRlclwiPlxuICAgICAgICAgICAgICA8SWNvbnMuUGx1c0NpcmNsZU91dGxpbmVkIGljb25TaXplPVwibFwiLz5cbiAgICAgICAgICAgIDwvU3R5bGVkVG9vbHRpcD5cbiAgICAgICAgICAgIHtxLmlkICE9PSBsYXRlc3RRdWVyeUlkICYmICg8U3R5bGVkVG9vbHRpcCB0b29sdGlwPXt0KCdSZW1vdmUgcXVlcnkgZnJvbSBsb2cnKX0gb25DbGljaz17KCkgPT4gZGlzcGF0Y2gocmVtb3ZlUXVlcnkocXVlcnkpKX0gY2xhc3NOYW1lPVwicG9pbnRlclwiPlxuICAgICAgICAgICAgICAgIDxJY29ucy5EZWxldGVPdXRsaW5lZCBpY29uU2l6ZT1cImxcIi8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkVG9vbHRpcD4pfVxuICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXR1cm4gcTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXZlcnNlKCk7XG4gICAgfSwgW3F1ZXJpZXMsIG9uVXNlckNsaWNrZWQsIG9uRGJDbGlja2VkLCB1c2VyLCBkaXNwbGF5TGltaXRdKTtcbiAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPVwiUXVlcnlUYWJsZVwiPlxuICAgICAgPFRhYmxlVmlldyBjb2x1bW5zPXtjb2x1bW5zT2ZUYWJsZX0gZGF0YT17ZGF0YX0gY2xhc3NOYW1lPVwidGFibGUtY29uZGVuc2VkXCIgcGFnZVNpemU9ezUwfS8+XG4gICAgPC9kaXY+KTtcbn07XG5leHBvcnQgZGVmYXVsdCBRdWVyeVRhYmxlO1xuIl19 */\"], children:\n        _jsx(HighlightedSql, { sql: sql, rawSql: q.executedSql, shrink: true, maxWidth: 60 }) }\n      );\n      if (q.resultsKey) {\n        q.results = _jsx(ModalTrigger, { className: \"ResultsModal\", triggerNode: _jsx(Button, { buttonSize: \"xsmall\", buttonStyle: \"tertiary\", children:\n            t('View') }\n          ), modalTitle: t('Data preview'), beforeOpen: () => openAsyncResults(query, displayLimit), onExit: () => dispatch(clearQueryResults(query)), modalBody: _jsx(ResultSet, { showSql: true, queryId: query.id, height: 400, displayLimit: displayLimit, defaultQueryLimit: 1000 }), responsive: true });\n      } else\n      {\n        q.results = _jsx(_Fragment, {});\n      }\n      q.progress =\n      state === 'success' ? _jsx(ProgressBar, { percent: parseInt(progress.toFixed(0), 10), striped: true, showInfo: false }) : _jsx(ProgressBar, { percent: parseInt(progress.toFixed(0), 10), striped: true });\n      q.state = _jsx(Tooltip, { title: status.config.label, children: status.config.icon });\n      q.actions = _jsxs(\"div\", { children: [\n        _jsx(StyledTooltip, { onClick: () => restoreSql(query), tooltip: t('Overwrite text in the editor with a query on this table'), placement: \"top\", className: \"pointer\", children:\n          _jsx(Icons.EditOutlined, { iconSize: \"l\" }) }\n        ),\n        _jsx(StyledTooltip, { onClick: () => openQueryInNewTab(query), tooltip: t('Run query in a new tab'), placement: \"top\", className: \"pointer\", children:\n          _jsx(Icons.PlusCircleOutlined, { iconSize: \"l\" }) }\n        ),\n        q.id !== latestQueryId && _jsx(StyledTooltip, { tooltip: t('Remove query from log'), onClick: () => dispatch(removeQuery(query)), className: \"pointer\", children:\n          _jsx(Icons.DeleteOutlined, { iconSize: \"l\" }) }\n        )] }\n      );\n      return q;\n    }).\n    reverse();\n  }, [queries, onUserClicked, onDbClicked, user, displayLimit]);\n  return _jsx(\"div\", { className: \"QueryTable\", children:\n    _jsx(TableView, { columns: columnsOfTable, data: data, className: \"table-condensed\", pageSize: 50 }) }\n  );\n};\nexport default QueryTable;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}