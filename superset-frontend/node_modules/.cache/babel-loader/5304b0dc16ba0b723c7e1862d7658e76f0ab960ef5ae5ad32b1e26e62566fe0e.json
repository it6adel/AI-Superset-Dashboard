{"ast":null,"code":"function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";} /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport rison from 'rison';\nimport { t, SupersetClient, styled, isFeatureEnabled, FeatureFlag, getClientErrorObject, ensureIsArray, useTheme, css } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst FormItem = AntdForm.Item;\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1blj7km\", styles: \"margin-top:1em\" } : { name: \"1gtq0eh-PropertiesModal\", styles: \"margin-top:1em;label:PropertiesModal;/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FkZWwvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9QaUUiLCJmaWxlIjoiL2hvbWUvYWRlbC9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL1Byb3BlcnRpZXNNb2RhbC9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyB1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNb2RhbCBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbCc7XG5pbXBvcnQgeyBJbnB1dCwgVGV4dEFyZWEgfSBmcm9tICdzcmMvY29tcG9uZW50cy9JbnB1dCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgeyBBc3luY1NlbGVjdCwgUm93LCBDb2wsIEFudGRGb3JtIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IHQsIFN1cGVyc2V0Q2xpZW50LCBzdHlsZWQsIGlzRmVhdHVyZUVuYWJsZWQsIEZlYXR1cmVGbGFnLCBnZXRDbGllbnRFcnJvck9iamVjdCwgZW5zdXJlSXNBcnJheSwgdXNlVGhlbWUsIGNzcywgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IHdpdGhUb2FzdHMgZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRvYXN0cy93aXRoVG9hc3RzJztcbmltcG9ydCB7IGxvYWRUYWdzIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFncy91dGlscyc7XG5pbXBvcnQgeyBmZXRjaFRhZ3MsIE9CSkVDVF9UWVBFUyB9IGZyb20gJ3NyYy9mZWF0dXJlcy90YWdzL3RhZ3MnO1xuY29uc3QgRm9ybUl0ZW0gPSBBbnRkRm9ybS5JdGVtO1xuY29uc3QgU3R5bGVkRm9ybUl0ZW0gPSBzdHlsZWQoQW50ZEZvcm0uSXRlbSkgYFxuICBtYXJnaW4tYm90dG9tOiAwO1xuYDtcbmNvbnN0IFN0eWxlZEhlbHBCbG9jayA9IHN0eWxlZC5zcGFuIGBcbiAgbWFyZ2luLWJvdHRvbTogMDtcbmA7XG5mdW5jdGlvbiBQcm9wZXJ0aWVzTW9kYWwoeyBzbGljZSwgb25IaWRlLCBvblNhdmUsIHNob3csIGFkZFN1Y2Nlc3NUb2FzdCwgfSkge1xuICAgIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgICBjb25zdCBbc3VibWl0dGluZywgc2V0U3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2Zvcm1dID0gQW50ZEZvcm0udXNlRm9ybSgpO1xuICAgIC8vIHZhbHVlcyBvZiBmb3JtIGlucHV0c1xuICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKHNsaWNlLnNsaWNlX25hbWUgfHwgJycpO1xuICAgIGNvbnN0IFtzZWxlY3RlZE93bmVycywgc2V0U2VsZWN0ZWRPd25lcnNdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3RhZ3MsIHNldFRhZ3NdID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IHRhZ3NBc1NlbGVjdFZhbHVlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RUYWdzID0gdGFncy5tYXAoKHRhZykgPT4gKHtcbiAgICAgICAgICAgIHZhbHVlOiB0YWcuaWQsXG4gICAgICAgICAgICBsYWJlbDogdGFnLm5hbWUsXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdFRhZ3M7XG4gICAgfSwgW3RhZ3MubGVuZ3RoXSk7XG4gICAgZnVuY3Rpb24gc2hvd0Vycm9yKHsgZXJyb3IsIHN0YXR1c1RleHQsIG1lc3NhZ2UgfSkge1xuICAgICAgICBsZXQgZXJyb3JUZXh0ID0gZXJyb3IgfHwgc3RhdHVzVGV4dCB8fCB0KCdBbiBlcnJvciBoYXMgb2NjdXJyZWQnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09ICdGb3JiaWRkZW4nKSB7XG4gICAgICAgICAgICBlcnJvclRleHQgPSB0KCdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBlZGl0IHRoaXMgY2hhcnQnKTtcbiAgICAgICAgfVxuICAgICAgICBNb2RhbC5lcnJvcih7XG4gICAgICAgICAgICB0aXRsZTogdCgnRXJyb3InKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGVycm9yVGV4dCxcbiAgICAgICAgICAgIG9rQnV0dG9uUHJvcHM6IHsgZGFuZ2VyOiB0cnVlLCBjbGFzc05hbWU6ICdidG4tZGFuZ2VyJyB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZmV0Y2hDaGFydE93bmVycyA9IHVzZUNhbGxiYWNrKGFzeW5jIGZ1bmN0aW9uIGZldGNoQ2hhcnRPd25lcnMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2NoYXJ0LyR7c2xpY2Uuc2xpY2VfaWR9YCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY2hhcnQgPSByZXNwb25zZS5qc29uLnJlc3VsdDtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkT3duZXJzKGNoYXJ0Py5vd25lcnM/Lm1hcCgob3duZXIpID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG93bmVyLmlkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBgJHtvd25lci5maXJzdF9uYW1lfSAke293bmVyLmxhc3RfbmFtZX1gLFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEVycm9yID0gYXdhaXQgZ2V0Q2xpZW50RXJyb3JPYmplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgc2hvd0Vycm9yKGNsaWVudEVycm9yKTtcbiAgICAgICAgfVxuICAgIH0sIFtzbGljZS5zbGljZV9pZF0pO1xuICAgIGNvbnN0IGxvYWRPcHRpb25zID0gdXNlTWVtbygoKSA9PiAoaW5wdXQgPSAnJywgcGFnZSwgcGFnZVNpemUpID0+IHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoe1xuICAgICAgICAgICAgZmlsdGVyOiBpbnB1dCxcbiAgICAgICAgICAgIHBhZ2UsXG4gICAgICAgICAgICBwYWdlX3NpemU6IHBhZ2VTaXplLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvcmVsYXRlZC9vd25lcnM/cT0ke3F1ZXJ5fWAsXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5leHRyYS5hY3RpdmUpXG4gICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS50ZXh0LFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICAgICAgfSkpO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jICh2YWx1ZXMpID0+IHtcbiAgICAgICAgc2V0U3VibWl0dGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgeyBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5LCBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzLCBkZXNjcmlwdGlvbiwgY2FjaGVfdGltZW91dDogY2FjaGVUaW1lb3V0LCB9ID0gdmFsdWVzO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgc2xpY2VfbmFtZTogbmFtZSB8fCBudWxsLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIHx8IG51bGwsXG4gICAgICAgICAgICBjYWNoZV90aW1lb3V0OiBjYWNoZVRpbWVvdXQgfHwgbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfHwgbnVsbCxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWVkQnkgJiYgY2VydGlmaWNhdGlvbkRldGFpbHMgPyBjZXJ0aWZpY2F0aW9uRGV0YWlscyA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZWxlY3RlZE93bmVycykge1xuICAgICAgICAgICAgcGF5bG9hZC5vd25lcnMgPSBzZWxlY3RlZE93bmVycy5tYXAobyA9PiBvLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSkge1xuICAgICAgICAgICAgcGF5bG9hZC50YWdzID0gdGFncy5tYXAodGFnID0+IHRhZy5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LnB1dCh7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2NoYXJ0LyR7c2xpY2Uuc2xpY2VfaWR9YCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSByZWR1eCBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZENoYXJ0ID0ge1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgLi4ucmVzLmpzb24ucmVzdWx0LFxuICAgICAgICAgICAgICAgIHRhZ3MsXG4gICAgICAgICAgICAgICAgaWQ6IHNsaWNlLnNsaWNlX2lkLFxuICAgICAgICAgICAgICAgIG93bmVyczogc2VsZWN0ZWRPd25lcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb25TYXZlKHVwZGF0ZWRDaGFydCk7XG4gICAgICAgICAgICBhZGRTdWNjZXNzVG9hc3QodCgnQ2hhcnQgcHJvcGVydGllcyB1cGRhdGVkJykpO1xuICAgICAgICAgICAgb25IaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHJlcykge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50RXJyb3IgPSBhd2FpdCBnZXRDbGllbnRFcnJvck9iamVjdChyZXMpO1xuICAgICAgICAgICAgc2hvd0Vycm9yKGNsaWVudEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9O1xuICAgIGNvbnN0IG93bmVyc0xhYmVsID0gdCgnT3duZXJzJyk7XG4gICAgLy8gZ2V0IHRoZSBvd25lcnMgb2YgdGhpcyBzbGljZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGZldGNoQ2hhcnRPd25lcnMoKTtcbiAgICB9LCBbZmV0Y2hDaGFydE93bmVyc10pO1xuICAgIC8vIHVwZGF0ZSBuYW1lIGFmdGVyIGl0J3MgY2hhbmdlZCBpbiBhbm90aGVyIG1vZGFsXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0TmFtZShzbGljZS5zbGljZV9uYW1lIHx8ICcnKTtcbiAgICB9LCBbc2xpY2Uuc2xpY2VfbmFtZV0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZldGNoVGFncyh7XG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZTogT0JKRUNUX1RZUEVTLkNIQVJULFxuICAgICAgICAgICAgICAgIG9iamVjdElkOiBzbGljZS5zbGljZV9pZCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlVHlwZXM6IGZhbHNlLFxuICAgICAgICAgICAgfSwgKHRhZ3MpID0+IHNldFRhZ3ModGFncyksIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgW3NsaWNlLnNsaWNlX2lkXSk7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlVGFncyA9ICh0YWdzKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFRhZ3MgPSBlbnN1cmVJc0FycmF5KHRhZ3MpLm1hcChyID0+ICh7XG4gICAgICAgICAgICBpZDogci52YWx1ZSxcbiAgICAgICAgICAgIG5hbWU6IHIubGFiZWwsXG4gICAgICAgIH0pKTtcbiAgICAgICAgc2V0VGFncyhwYXJzZWRUYWdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUNsZWFyVGFncyA9ICgpID0+IHtcbiAgICAgICAgc2V0VGFncyhbXSk7XG4gICAgfTtcbiAgICByZXR1cm4gKDxNb2RhbCBzaG93PXtzaG93fSBvbkhpZGU9e29uSGlkZX0gdGl0bGU9ezxzcGFuPlxuICAgICAgICAgIDxJY29ucy5FZGl0T3V0bGluZWQgY3NzPXtjc3MgYFxuICAgICAgICAgICAgICBtYXJnaW46IGF1dG8gJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHggYXV0byAwO1xuICAgICAgICAgICAgYH0gZGF0YS10ZXN0PVwiZWRpdC1hbHRcIi8+XG4gICAgICAgICAge3QoJ0VkaXQgQ2hhcnQgUHJvcGVydGllcycpfVxuICAgICAgICA8L3NwYW4+fSBmb290ZXI9ezw+XG4gICAgICAgICAgPEJ1dHRvbiBkYXRhLXRlc3Q9XCJwcm9wZXJ0aWVzLW1vZGFsLWNhbmNlbC1idXR0b25cIiBodG1sVHlwZT1cImJ1dHRvblwiIGJ1dHRvblNpemU9XCJzbWFsbFwiIG9uQ2xpY2s9e29uSGlkZX0gY3RhPlxuICAgICAgICAgICAge3QoJ0NhbmNlbCcpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxCdXR0b24gZGF0YS10ZXN0PVwicHJvcGVydGllcy1tb2RhbC1zYXZlLWJ1dHRvblwiIGh0bWxUeXBlPVwic3VibWl0XCIgYnV0dG9uU2l6ZT1cInNtYWxsXCIgYnV0dG9uU3R5bGU9XCJwcmltYXJ5XCIgb25DbGljaz17Zm9ybS5zdWJtaXR9IGRpc2FibGVkPXtzdWJtaXR0aW5nIHx8ICFuYW1lIHx8IHNsaWNlLmlzX21hbmFnZWRfZXh0ZXJuYWxseX0gdG9vbHRpcD17c2xpY2UuaXNfbWFuYWdlZF9leHRlcm5hbGx5XG4gICAgICAgICAgICAgICAgPyB0KFwiVGhpcyBjaGFydCBpcyBtYW5hZ2VkIGV4dGVybmFsbHksIGFuZCBjYW4ndCBiZSBlZGl0ZWQgaW4gU3VwZXJzZXRcIilcbiAgICAgICAgICAgICAgICA6ICcnfSBjdGE+XG4gICAgICAgICAgICB7dCgnU2F2ZScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8Lz59IHJlc3BvbnNpdmUgd3JhcFByb3BzPXt7ICdkYXRhLXRlc3QnOiAncHJvcGVydGllcy1lZGl0LW1vZGFsJyB9fT5cbiAgICAgIDxBbnRkRm9ybSBmb3JtPXtmb3JtfSBvbkZpbmlzaD17b25TdWJtaXR9IGxheW91dD1cInZlcnRpY2FsXCIgaW5pdGlhbFZhbHVlcz17e1xuICAgICAgICAgICAgbmFtZTogc2xpY2Uuc2xpY2VfbmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzbGljZS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIGNhY2hlX3RpbWVvdXQ6IHNsaWNlLmNhY2hlX3RpbWVvdXQgIT0gbnVsbCA/IHNsaWNlLmNhY2hlX3RpbWVvdXQgOiAnJyxcbiAgICAgICAgICAgIGNlcnRpZmllZF9ieTogc2xpY2UuY2VydGlmaWVkX2J5IHx8ICcnLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBzbGljZS5jZXJ0aWZpZWRfYnkgJiYgc2xpY2UuY2VydGlmaWNhdGlvbl9kZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBzbGljZS5jZXJ0aWZpY2F0aW9uX2RldGFpbHNcbiAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICB9fT5cbiAgICAgICAgPFJvdyBndXR0ZXI9ezE2fT5cbiAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgIDxoMz57dCgnQmFzaWMgaW5mb3JtYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtIGxhYmVsPXt0KCdOYW1lJyl9IHJlcXVpcmVkPlxuICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD17dCgnTmFtZScpfSBuYW1lPVwibmFtZVwiIGRhdGEtdGVzdD1cInByb3BlcnRpZXMtbW9kYWwtbmFtZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXsoZXZlbnQpID0+IHNldE5hbWUoZXZlbnQudGFyZ2V0LnZhbHVlID8/ICcnKX0vPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfSBuYW1lPVwiZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICA8VGV4dEFyZWEgcm93cz17M30gc3R5bGU9e3sgbWF4V2lkdGg6ICcxMDAlJyB9fS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGRpc3BsYXllZCBhcyB3aWRnZXQgaGVhZGVycyBpbiB0aGUgZGFzaGJvYXJkIHZpZXcuIFN1cHBvcnRzIG1hcmtkb3duLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8aDM+e3QoJ0NlcnRpZmljYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfSBuYW1lPVwiY2VydGlmaWVkX2J5XCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgY2hhcnQuJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX0gbmFtZT1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX0vPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dCgnQW55IGFkZGl0aW9uYWwgZGV0YWlsIHRvIHNob3cgaW4gdGhlIGNlcnRpZmljYXRpb24gdG9vbHRpcC4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgPGgzPnt0KCdDb25maWd1cmF0aW9uJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdDYWNoZSB0aW1lb3V0Jyl9IG5hbWU9XCJjYWNoZV90aW1lb3V0XCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9XCJDYWNoZSB0aW1lb3V0XCIvPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dChcIkR1cmF0aW9uIChpbiBzZWNvbmRzKSBvZiB0aGUgY2FjaGluZyB0aW1lb3V0IGZvciB0aGlzIGNoYXJ0LiBTZXQgdG8gLTEgdG8gYnlwYXNzIHRoZSBjYWNoZS4gTm90ZSB0aGlzIGRlZmF1bHRzIHRvIHRoZSBkYXRhc2V0J3MgdGltZW91dCBpZiB1bmRlZmluZWQuXCIpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8aDMgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMWVtJyB9fT57dCgnQWNjZXNzJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbSBsYWJlbD17b3duZXJzTGFiZWx9PlxuICAgICAgICAgICAgICA8QXN5bmNTZWxlY3QgYXJpYUxhYmVsPXtvd25lcnNMYWJlbH0gbW9kZT1cIm11bHRpcGxlXCIgbmFtZT1cIm93bmVyc1wiIHZhbHVlPXtzZWxlY3RlZE93bmVycyB8fCBbXX0gb25DaGFuZ2U9e3NldFNlbGVjdGVkT3duZXJzfSBvcHRpb25zPXtsb2FkT3B0aW9uc30gZGlzYWJsZWQ9eyFzZWxlY3RlZE93bmVyc30gYWxsb3dDbGVhci8+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdBIGxpc3Qgb2YgdXNlcnMgd2hvIGNhbiBhbHRlciB0aGUgY2hhcnQuIFNlYXJjaGFibGUgYnkgbmFtZSBvciB1c2VybmFtZS4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAge2lzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVGFnZ2luZ1N5c3RlbSkgJiYgKDxoMyBjc3M9e3sgbWFyZ2luVG9wOiAnMWVtJyB9fT57dCgnVGFncycpfTwvaDM+KX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRhZ2dpbmdTeXN0ZW0pICYmICg8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgPEFzeW5jU2VsZWN0IGFyaWFMYWJlbD1cIlRhZ3NcIiBtb2RlPVwibXVsdGlwbGVcIiB2YWx1ZT17dGFnc0FzU2VsZWN0VmFsdWVzfSBvcHRpb25zPXtsb2FkVGFnc30gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZVRhZ3N9IG9uQ2xlYXI9e2hhbmRsZUNsZWFyVGFnc30gYWxsb3dDbGVhci8+XG4gICAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICB7dCgnQSBsaXN0IG9mIHRhZ3MgdGhhdCBoYXZlIGJlZW4gYXBwbGllZCB0byB0aGlzIGNoYXJ0LicpfVxuICAgICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgICA8L0Zvcm1JdGVtPil9XG4gICAgICAgICAgPC9Db2w+XG4gICAgICAgIDwvUm93PlxuICAgICAgPC9BbnRkRm9ybT5cbiAgICA8L01vZGFsPik7XG59XG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKFByb3BlcnRpZXNNb2RhbCk7XG4iXX0= */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nfunction PropertiesModal({ slice, onHide, onSave, show, addSuccessToast }) {\n  const theme = useTheme();\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState(null);\n  const [tags, setTags] = useState([]);\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag) => ({\n      value: tag.id,\n      label: tag.name\n    }));\n    return selectTags;\n  }, [tags.length]);\n  function showError({ error, statusText, message }) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' }\n    });\n  }\n  const fetchChartOwners = useCallback(async function fetchChartOwners() {\n    try {var _chart$owners;\n      const response = await SupersetClient.get({\n        endpoint: `/api/v1/chart/${slice.slice_id}`\n      });\n      const chart = response.json.result;\n      setSelectedOwners(chart == null ? void 0 : (_chart$owners = chart.owners) == null ? void 0 : _chart$owners.map((owner) => ({\n        value: owner.id,\n        label: `${owner.first_name} ${owner.last_name}`\n      })));\n    }\n    catch (response) {\n      const clientError = await getClientErrorObject(response);\n      showError(clientError);\n    }\n  }, [slice.slice_id]);\n  const loadOptions = useMemo(() => (input = '', page, pageSize) => {\n    const query = rison.encode({\n      filter: input,\n      page,\n      page_size: pageSize\n    });\n    return SupersetClient.get({\n      endpoint: `/api/v1/chart/related/owners?q=${query}`\n    }).then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text\n      })),\n      totalCount: response.json.count\n    }));\n  }, []);\n  const onSubmit = async (values) => {\n    setSubmitting(true);\n    const { certified_by: certifiedBy, certification_details: certificationDetails, description, cache_timeout: cacheTimeout } = values;\n    const payload = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details: certifiedBy && certificationDetails ? certificationDetails : null\n    };\n    if (selectedOwners) {\n      payload.owners = selectedOwners.map((o) => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map((tag) => tag.id);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    }\n    catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n  const ownersLabel = t('Owners');\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem))\n    return;\n    try {\n      fetchTags({\n        objectType: OBJECT_TYPES.CHART,\n        objectId: slice.slice_id,\n        includeTypes: false\n      }, (tags) => setTags(tags), (error) => {\n        showError(error);\n      });\n    }\n    catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n  const handleChangeTags = (tags) => {\n    const parsedTags = ensureIsArray(tags).map((r) => ({\n      id: r.value,\n      name: r.label\n    }));\n    setTags(parsedTags);\n  };\n  const handleClearTags = () => {\n    setTags([]);\n  };\n  return _jsx(Modal, { show: show, onHide: onHide, title: _jsxs(\"span\", { children: [\n      _jsx(Icons.EditOutlined, { css: css`\n              margin: auto ${theme.gridUnit * 2}px auto 0;\n            ` }),\n      t('Edit Chart Properties')] }\n    ), footer: _jsxs(_Fragment, { children: [\n      _jsx(Button, { htmlType: \"button\", buttonSize: \"small\", onClick: onHide, cta: true, children:\n        t('Cancel') }\n      ),\n      _jsx(Button, { htmlType: \"submit\", buttonSize: \"small\", buttonStyle: \"primary\", onClick: form.submit, disabled: submitting || !name || slice.is_managed_externally, tooltip: slice.is_managed_externally ?\n        t(\"This chart is managed externally, and can't be edited in Superset\") :\n        '', cta: true, children:\n        t('Save') }\n      )] }\n    ), responsive: true, wrapProps: {}, children:\n    _jsx(AntdForm, { form: form, onFinish: onSubmit, layout: \"vertical\", initialValues: {\n        name: slice.slice_name || '',\n        description: slice.description || '',\n        cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n        certified_by: slice.certified_by || '',\n        certification_details: slice.certified_by && slice.certification_details ?\n        slice.certification_details :\n        ''\n      }, children:\n      _jsxs(Row, { gutter: 16, children: [\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Basic information') }),\n          _jsx(FormItem, { label: t('Name'), required: true, children:\n            _jsx(Input, { \"aria-label\": t('Name'), name: \"name\", type: \"text\", value: name, onChange: (event) => {var _event$target$value;return setName((_event$target$value = event.target.value) != null ? _event$target$value : '');} }) }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Description'), name: \"description\", children:\n              _jsx(TextArea, { rows: 3, style: { maxWidth: '100%' } }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('The description can be displayed as widget headers in the dashboard view. Supports markdown.') }\n            )] }\n          ),\n          _jsx(\"h3\", { children: t('Certification') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certified by'), name: \"certified_by\", children:\n              _jsx(Input, { \"aria-label\": t('Certified by') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Person or group that has certified this chart.') }\n            )] }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certification details'), name: \"certification_details\", children:\n              _jsx(Input, { \"aria-label\": t('Certification details') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Any additional detail to show in the certification tooltip.') }\n            )] }\n          )] }\n        ),\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Configuration') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Cache timeout'), name: \"cache_timeout\", children:\n              _jsx(Input, { \"aria-label\": \"Cache timeout\" }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t(\"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\") }\n            )] }\n          ),\n          _jsx(\"h3\", { style: { marginTop: '1em' }, children: t('Access') }),\n          _jsxs(FormItem, { label: ownersLabel, children: [\n            _jsx(AsyncSelect, { ariaLabel: ownersLabel, mode: \"multiple\", name: \"owners\", value: selectedOwners || [], onChange: setSelectedOwners, options: loadOptions, disabled: !selectedOwners, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of users who can alter the chart. Searchable by name or username.') }\n            )] }\n          ),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsx(\"h3\", { css: _ref, children: t('Tags') }),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsxs(FormItem, { children: [\n            _jsx(AsyncSelect, { ariaLabel: \"Tags\", mode: \"multiple\", value: tagsAsSelectValues, options: loadTags, onChange: handleChangeTags, onClear: handleClearTags, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of tags that have been applied to this chart.') }\n            )] }\n          )] }\n        )] }\n      ) }\n    ) }\n  );\n}\nexport default withToasts(PropertiesModal);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}