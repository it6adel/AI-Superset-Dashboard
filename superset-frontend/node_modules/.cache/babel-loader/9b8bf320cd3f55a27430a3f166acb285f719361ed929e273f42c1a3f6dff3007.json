{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';\nimport { extendedDayjs } from 'src/utils/dates';\nimport Loading from 'src/components/Loading';\nimport { AntdThemeProvider } from 'src/components/AntdThemeProvider';\nimport { useLocale } from 'src/hooks/useLocale';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\nfunction DateRangeFilter({ Header, initialValue, onSubmit }, ref) {\n  const [value, setValue] = useState(initialValue != null ? initialValue : null);\n  const dayjsValue = useMemo(() => {\n    if (!value || Array.isArray(value) && !value.length)\n    return null;\n    return [extendedDayjs(value[0]), extendedDayjs(value[1])];\n  }, [value]);\n  const locale = useLocale();\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    }\n  }));\n  if (locale === null) {\n    return _jsx(Loading, { position: \"inline-centered\" });\n  }\n  return _jsx(AntdThemeProvider, { locale: locale, children:\n    _jsxs(RangeFilterContainer, { children: [\n      _jsx(FormLabel, { children: Header }),\n      _jsx(RangePicker, { placeholder: [t('Start date'), t('End date')], showTime: true, value: dayjsValue, onCalendarChange: (dayjsRange) => {var _dayjsRange$, _dayjsRange$2, _dayjsRange$0$valueOf, _dayjsRange$3, _dayjsRange$1$valueOf, _dayjsRange$4;\n          if (!(dayjsRange != null && (_dayjsRange$ = dayjsRange[0]) != null && _dayjsRange$.valueOf()) || !(dayjsRange != null && (_dayjsRange$2 = dayjsRange[1]) != null && _dayjsRange$2.valueOf())) {\n            setValue(null);\n            onSubmit([]);\n            return;\n          }\n          const changeValue = [(_dayjsRange$0$valueOf = (_dayjsRange$3 =\n          dayjsRange[0]) == null ? void 0 : _dayjsRange$3.valueOf()) != null ? _dayjsRange$0$valueOf : 0, (_dayjsRange$1$valueOf = (_dayjsRange$4 =\n          dayjsRange[1]) == null ? void 0 : _dayjsRange$4.valueOf()) != null ? _dayjsRange$1$valueOf : 0];\n\n          setValue(changeValue);\n          onSubmit(changeValue);\n        } })] }\n    ) }\n  );\n}\nexport default /*#__PURE__*/forwardRef(DateRangeFilter);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}